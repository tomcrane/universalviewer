var exjs;!function(t){t.version="0.3.0"}(exjs||(exjs={}));var exjs;!function(t){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)})}(exjs||(exjs={}));var exjs;!function(t){var e=function(){function t(){}return t.prototype.getEnumerator=function(){return{moveNext:function(){return!1},current:void 0}},t.prototype.aggregate=function(t,e){for(var r=t,n=this.getEnumerator();n.moveNext();)r=e(r,n.current);return r},t.prototype.all=function(t){if(t)for(var e=this.getEnumerator(),r=0;e.moveNext();){if(!t(e.current,r))return!1;r++}return!0},t.prototype.any=function(t){for(var e=this.getEnumerator(),r=0;e.moveNext();){if(!t)return!0;if(t(e.current,r))return!0;r++}return!1},t.prototype.apply=function(t){throw new Error("Not implemented")},t.prototype.at=function(t){for(var e=this.getEnumerator(),r=0;e.moveNext();){if(r===t)return e.current;r++}},t.prototype.average=function(t){var e=0,r=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var n=this.getEnumerator();n.moveNext();)r+=t(n.current),e++;return 0===e?0:r/e},t.prototype.concat=function(t){throw new Error("Not implemented")},t.prototype.count=function(t){for(var e=0,r=this.getEnumerator();r.moveNext();)(!t||t(r.current))&&e++;return e},t.prototype.difference=function(t,e){return e=e||function(t,e){return t===e},t instanceof Array&&(t=t.en()),{intersection:this.intersect(t,e).toArray().en(),aNotB:this.except(t,e).toArray().en(),bNotA:t.except(this,e).toArray().en()}},t.prototype.distinct=function(t){throw new Error("Not implemented")},t.prototype.except=function(t,e){throw new Error("Not implemented")},t.prototype.first=function(t){for(var e=this.getEnumerator();e.moveNext();)if(!t||t(e.current))return e.current},t.prototype.firstIndex=function(t){for(var e=this.getEnumerator(),r=0;e.moveNext();r++)if(!t||t(e.current))return r;return-1},t.prototype.forEach=function(t){for(var e=this.getEnumerator();e.moveNext();)t(e.current)},t.prototype.groupBy=function(t,e){throw new Error("Not implemented")},t.prototype.intersect=function(t,e){throw new Error("Not implemented")},t.prototype.join=function(t,e,r,n,o){throw new Error("Not implemented")},t.prototype.last=function(t){for(var e,r=this.getEnumerator();r.moveNext();)(!t||t(r.current))&&(e=r.current);return e},t.prototype.lastIndex=function(t){for(var e=-1,r=this.getEnumerator(),n=0;r.moveNext();n++)(!t||t(r.current))&&(e=n);return e},t.prototype.max=function(t){var e=this.getEnumerator();if(!e.moveNext())return 0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var r=t(e.current);e.moveNext();)r=Math.max(r,t(e.current));return r},t.prototype.min=function(t){var e=this.getEnumerator();if(!e.moveNext())return 0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var r=t(e.current);e.moveNext();)r=Math.min(r,t(e.current));return r},t.prototype.orderBy=function(t,e){throw new Error("Not implemented")},t.prototype.orderByDescending=function(t,e){throw new Error("Not implemented")},t.prototype.reverse=function(){throw new Error("Not implemented")},t.prototype.select=function(t){throw new Error("Not implemented")},t.prototype.selectMany=function(t){throw new Error("Not implemented")},t.prototype.skip=function(t){throw new Error("Not implemented")},t.prototype.skipWhile=function(t){throw new Error("Not implemented")},t.prototype.standardDeviation=function(t){var e=this.average(t),r=0,n=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var o=this.getEnumerator();o.moveNext();){var i=t(o.current)-e;r+=i*i,n++}return Math.sqrt(r/n)},t.prototype.sum=function(t){var e=0;t=t||function(t){if("number"!=typeof t)throw new Error("Object is not a number.");return t};for(var r=this.getEnumerator();r.moveNext();)e+=t(r.current);return e},t.prototype.take=function(t){throw new Error("Not implemented")},t.prototype.takeWhile=function(t){throw new Error("Not implemented")},t.prototype.traverse=function(t){throw new Error("Not implemented")},t.prototype.traverseUnique=function(t,e){throw new Error("Not implemented")},t.prototype.toArray=function(){for(var t=[],e=this.getEnumerator();e.moveNext();)t.push(e.current);return t},t.prototype.toMap=function(t,e){throw new Error("Not implemented")},t.prototype.toList=function(){throw new Error("Not implemented")},t.prototype.union=function(t,e){throw new Error("Not implemented")},t.prototype.where=function(t){throw new Error("Not implemented")},t.prototype.zip=function(t,e){throw new Error("Not implemented")},t}();t.Enumerable=e}(exjs||(exjs={}));var Symbol,exjs;!function(t){function e(t){var e;return{next:function(){var r={done:!0,value:void 0};return t&&(e=e||t.getEnumerator())?(r.done=!e.moveNext(),r.value=e.current,r):r}}}Symbol&&Symbol.iterator&&(t.Enumerable.prototype[Symbol.iterator]=function(){return e(this)})}(exjs||(exjs={}));var exjs;!function(t){var e=function(){function e(t){this.size=0,this._keys=[],this._values=[];var e;if(t instanceof Array?e=t.en():t&&t.getEnumerator instanceof Function&&(e=t),e)for(var r=e.getEnumerator();r&&r.moveNext();)this.set(r.current[0],r.current[1])}return e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype["delete"]=function(t){var e=this._keys.indexOf(t);return e>-1?(this._keys.splice(e,1),this._values.splice(e,1),this.size--,!0):!1},e.prototype.entries=function(){var e=this;return t.range(0,this.size).select(function(t){return[e._keys[t],e._values[t]]})},e.prototype.forEach=function(t,e){null==e&&(e=this);for(var r=0,n=this._keys,o=this._values,i=n.length;i>r;r++)t.call(e,o[r],n[r],this)},e.prototype.get=function(t){var e=this._keys.indexOf(t);return this._values[e]},e.prototype.has=function(t){return this._keys.indexOf(t)>-1},e.prototype.keys=function(){return this._keys.en()},e.prototype.set=function(t,e){var r=this._keys.indexOf(t);return void(r>-1?this._values[r]=e:(this._keys.push(t),this._values.push(e),this.size++))},e.prototype.values=function(){return this._values.en()},e}();t.Map3=e,t.Enumerable.prototype.toMap=function(t,r){for(var n=new e,o=this.getEnumerator();o.moveNext();)n.set(t(o.current),r(o.current));return n},t.List&&(t.List.prototype.toMap=t.Enumerable.prototype.toMap)}(exjs||(exjs={})),function(t){t.Map||(t.Map=exjs.Map3)}("undefined"==typeof window?global:window);var exjs;!function(t){function e(t,e){var r,n=0,o={current:void 0,moveNext:function(){return r||(r=t.getEnumerator()),r.moveNext()?(e(o.current=r.current,n),n++,!0):!1}};return o}t.Enumerable.prototype.apply=function(r){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.List&&(t.List.prototype.apply=t.Enumerable.prototype.apply)}(exjs||(exjs={}));var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},exjs;!function(t){function e(t){var e=t.length,r={moveNext:void 0,current:void 0},n=-1;return r.moveNext=function(){return n++,n>=e?(r.current=void 0,!1):(r.current=t[n],!0)},r}function r(){return this&&Array.isArray(this)?new n(this):new t.Enumerable}var n=function(t){function r(r){t.call(this),this.getEnumerator=function(){return e(r)},this.toArray=function(){return r.slice(0)}}return __extends(r,t),r}(t.Enumerable);try{Object.defineProperty(Array.prototype,"en",{value:r,enumerable:!1,writable:!1,configurable:!1})}catch(o){Array.prototype.en=r}}(exjs||(exjs={}));var exjs;!function(t){function e(t,e){var r,n=!1,o={current:void 0,moveNext:function(){return r||(r=t.getEnumerator()),o.current=void 0,r.moveNext()?(o.current=r.current,!0):n?!1:(n=!0,r=e.getEnumerator(),r.moveNext()?(o.current=r.current,!0):!1)}};return o}t.Enumerable.prototype.concat=function(r){var n=this,o=r instanceof Array?r.en():r,i=new t.Enumerable;return i.getEnumerator=function(){return e(n,o)},i},t.List&&(t.List.prototype.concat=t.Enumerable.prototype.concat)}(exjs||(exjs={}));var exjs;!function(t){function e(t,e){var r,n=[],o={current:void 0,moveNext:function(){if(r||(r=t.getEnumerator()),o.current=void 0,!e){for(;r.moveNext();)if(n.indexOf(r.current)<0)return n.push(o.current=r.current),!0;return!1}for(;r.moveNext();){for(var i=0,a=n.length,s=!1;a>i&&!s;i++)s=!!e(n[i],r.current);if(!s)return n.push(o.current=r.current),!0}return!1}};return o}t.Enumerable.prototype.distinct=function(r){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.List&&(t.List.prototype.distinct=t.Enumerable.prototype.distinct)}(exjs||(exjs={}));var exjs;!function(t){function e(t,e,r){r=r||function(t,e){return t===e};var n,o={current:void 0,moveNext:function(){for(n||(n=t.getEnumerator()),o.current=void 0;n.moveNext();){for(var i=!1,a=e.getEnumerator();a.moveNext()&&!i;)i=r(n.current,a.current);if(!i)return o.current=n.current,!0}return!1}};return o}t.Enumerable.prototype.except=function(r,n){var o=this,i=r instanceof Array?r.en():r,a=new t.Enumerable;return a.getEnumerator=function(){return e(o,i,n)},a},t.List&&(t.List.prototype.except=t.Enumerable.prototype.except)}(exjs||(exjs={})),Function.prototype.fromJson=function(t,e){function r(t,e){if(null==t)return t;if(e instanceof Function)return e(t);if(e instanceof Array){if(e=e[0],!(e instanceof Function&&t instanceof Array))return;for(var r=[],n=0;n<t.length;n++)r.push(e(t[n]));return r}}var n=new this;if(null==t)return n;var o=[];for(var i in e){var a=r(t[i],e[i]);void 0!==a&&(n[i]=a,o.push(i))}for(var i in this.$jsonMappings)if(!(o.indexOf(i)>-1)){var a=r(t[i],this.$jsonMappings[i]);void 0!==a&&(n[i]=a,o.push(i))}for(var i in t)o.indexOf(i)>-1||(n[i]=t[i]);return n};var exjs;!function(t){function e(t,e,n){var o,i=0,a={current:void 0,moveNext:function(){return o||(o=r(t,e,n)),a.current=void 0,i>=o.length?!1:(a.current=o[i],i++,!0)}};return a}function r(t,e,r){r=r||function(t,e){return t===e};for(var o,i=[],a=[],s=t.getEnumerator();s.moveNext();){o=e(s.current);for(var u=-1,c=0,f=a.length;f>c;c++)if(r(o,a[c])){u=c;break}var l;0>u?(a.push(o),i.push(l=new n(o))):l=i[u],l._add(s.current)}return i}var n=function(t){function e(e){var r=this;t.call(this),this.key=e,this._arr=[],this.getEnumerator=function(){return r._arr.en().getEnumerator()}}return __extends(e,t),e.prototype._add=function(t){this._arr.push(t)},e}(t.Enumerable);t.Enumerable.prototype.groupBy=function(r,n){var o=this,i=new t.Enumerable;return i.getEnumerator=function(){return e(o,r,n)},i},t.List&&(t.List.prototype.groupBy=t.Enumerable.prototype.groupBy)}(exjs||(exjs={}));var exjs;!function(t){function e(e,r,n){n=n||function(t,e){return t===e};var o,i={current:void 0,moveNext:function(){for(o||(o=t.en(e).distinct().getEnumerator()),i.current=void 0;o.moveNext();){for(var a=!1,s=r.getEnumerator();s.moveNext()&&!a;)a=n(o.current,s.current);if(a)return i.current=o.current,!0}return!1}};return i}t.Enumerable.prototype.intersect=function(r,n){var o=this,i=r instanceof Array?r.en():r,a=new t.Enumerable;return a.getEnumerator=function(){return e(o,i,n)},a},t.List&&(t.List.prototype.intersect=t.Enumerable.prototype.intersect)}(exjs||(exjs={}));var exjs;!function(t){function e(e,r,n,o,i,a){a=a||function(t,e){return t===e};var s,u,c=0,f={current:void 0,moveNext:function(){if(f.current=void 0,!s){if(s=e.getEnumerator(),!s.moveNext())return!1;u=t.en(r).toArray()}var l;do{for(;c<u.length;c++)if(l=u[c],a(n(s.current),o(l)))return c++,f.current=i(s.current,l),!0;c=0}while(s.moveNext());return!1}};return f}t.Enumerable.prototype.join=function(r,n,o,i,a){var s=this,u=r instanceof Array?r.en():r,c=new t.Enumerable;return c.getEnumerator=function(){return e(s,u,n,o,i,a)},c},t.List&&(t.List.prototype.join=t.Enumerable.prototype.join)}(exjs||(exjs={}));var exjs;!function(t){function e(){this.constructor=r}t.Enumerable.prototype.toList=function(){for(var t=new r,e=this.getEnumerator();e.moveNext();)t.push(e.current);return t};var r=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.toString=function(){throw new Error("Not implemented")},e.prototype.toLocaleString=function(){throw new Error("Not implemented")},e.prototype.pop=function(){throw new Error("Not implemented")},e.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented")},e.prototype.shift=function(){throw new Error("Not implemented")},e.prototype.slice=function(t,e){throw new Error("Not implemented")},e.prototype.sort=function(t){throw new Error("Not implemented")},e.prototype.splice=function(){throw new Error("Not implemented")},e.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];throw new Error("Not implemented")},e.prototype.indexOf=function(t,e){throw new Error("Not implemented")},e.prototype.lastIndexOf=function(t,e){throw new Error("Not implemented")},e.prototype.every=function(t,e){throw new Error("Not implemented")},e.prototype.some=function(t,e){throw new Error("Not implemented")},e.prototype.forEach=function(t,e){throw new Error("Not implemented")},e.prototype.map=function(t,e){throw new Error("Not implemented")},e.prototype.filter=function(t,e){throw new Error("Not implemented")},e.prototype.reduce=function(t,e){throw new Error("Not implemented")},e.prototype.reduceRight=function(t,e){throw new Error("Not implemented")},e.prototype.remove=function(t){throw new Error("Not implemented")},e.prototype.removeWhere=function(t){throw new Error("Not implemented")},e}(t.Enumerable);t.List=r;for(var n in Array)Array.hasOwnProperty(n)&&(r[n]=Array[n]);e.prototype=Array.prototype,r.prototype=new e;for(var o in t.Enumerable.prototype)"getEnumerator"!==o&&(r.prototype[o]=t.Enumerable.prototype[o]);r.prototype.getEnumerator=function(){var t=this,e=t.length,r={moveNext:void 0,current:void 0},n=-1;return r.moveNext=function(){return n++,n>=e?(r.current=void 0,!1):(r.current=t[n],!0)},r},r.prototype.remove=function(t){return this.removeWhere(function(e){return e===t}).any()},r.prototype.removeWhere=function(t){for(var e,r=[],n=this.length-1;n>=0;n--)e=this[n],t(e,n)===!0&&(this.splice(n,1),r.push(e));return r.en().reverse()}}(exjs||(exjs={}));var exjs;!function(t){function e(t,e,n,o){return new r(t,e,n,o)}var r=function(e){function r(t,r,n,o){e.call(this),this.Source=t,o=o||function(t,e){return t>e?1:e>t?-1:0};var i=n===!0?-1:1;this.Sorter=function(t,e){return i*o(r(t),r(e))}}return __extends(r,e),r.prototype.getEnumerator=function(){var e,r=this.Source,n=this.Sorter,o=0,i={current:void 0,moveNext:function(){return e||(e=t.en(r).toArray(),e.sort(n)),i.current=void 0,o>=e.length?!1:(i.current=e[o],o++,!0)}};return i},r.prototype.thenBy=function(t,e){return new n(this,t,!1,e)},r.prototype.thenByDescending=function(t,e){return new n(this,t,!0,e)},r}(t.Enumerable),n=function(t){function e(e,r,n,o){t.call(this,e,r,n,o);var i=e.Sorter,a=this.Sorter;this.Sorter=function(t,e){return i(t,e)||a(t,e)}}return __extends(e,t),e}(r),o=t.Enumerable.prototype;o.orderBy=function(t,r){return e(this,t,!1,r)},o.orderByDescending=function(t,r){return e(this,t,!0,r)},t.List&&(t.List.prototype.orderBy=t.Enumerable.prototype.orderBy,t.List.prototype.orderByDescending=t.Enumerable.prototype.orderByDescending)}(exjs||(exjs={}));var exjs;!function(t){function e(t,e,r){var n=t-r,o={current:void 0,moveNext:function(){return n+=r,n>=e?!1:(o.current=n,!0)}};return o}function r(r,n,o){if(r=r||0,n=n||0,r>n)throw new Error("Start cannot be greater than end.");null==o&&(o=1);var i=new t.Enumerable;return i.getEnumerator=function(){return e(r,n,o)},i}t.range=r}(exjs||(exjs={}));var exjs;!function(t){function e(e){var r,n=0,o={current:void 0,moveNext:function(){return r||(r=t.en(e).toArray(),n=r.length),n--,o.current=r[n],n>=0}};return o}t.Enumerable.prototype.reverse=function(){var r=this,n=new t.Enumerable;return n.getEnumerator=function(){return e(r)},n},t.List&&(t.List.prototype.reverse=t.Enumerable.prototype.reverse)}(exjs||(exjs={}));var exjs;!function(t){function e(t,e){if(e=e||0,0===e)return Math.round(t);var r=Math.pow(10,e);return Math.round(t*r)/r}t.round=e}(exjs||(exjs={}));var exjs;!function(t){function e(t,e){var r,n=0,o={current:void 0,moveNext:function(){return r||(r=t.getEnumerator()),r.moveNext()?(o.current=e(r.current,n),n++,!0):!1}};return o}function r(e,r){var n,o,i={current:void 0,moveNext:function(){for(i.current=void 0,n||(n=e.getEnumerator());!o||!o.moveNext();){if(!n.moveNext())return!1;o=t.selectorEnumerator(r(n.current))}return i.current=o.current,!0}};return i}t.Enumerable.prototype.select=function(r){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.Enumerable.prototype.selectMany=function(e){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return r(n,e)},o},t.List&&(t.List.prototype.select=t.Enumerable.prototype.select,t.List.prototype.selectMany=t.Enumerable.prototype.selectMany)}(exjs||(exjs={}));var exjs;!function(t){function e(t){return Array.isArray(t)?t.en().getEnumerator():null!=t&&"function"==typeof t.getEnumerator?t.getEnumerator():null}t.selectorEnumerator=e}(exjs||(exjs={}));var exjs;!function(t){function e(t,e){var r,n={current:void 0,moveNext:function(){if(!r){r=t.getEnumerator();for(var o=0;e>o;o++)if(!r.moveNext())return!1}return r.moveNext()?(n.current=r.current,!0):(n.current=void 0,!1)}};return n}function r(t,e){var r,n={current:void 0,moveNext:function(){if(!r){r=t.getEnumerator();for(var o=0;r.moveNext();o++)if(!e(n.current=r.current,o))return!0;return n.current=void 0,!1}return r.moveNext()?(n.current=r.current,!0):(n.current=void 0,!1)}};return n}t.Enumerable.prototype.skip=function(r){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.Enumerable.prototype.skipWhile=function(e){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return r(n,e)},o},t.List&&(t.List.prototype.skip=t.Enumerable.prototype.skip,t.List.prototype.skipWhile=t.Enumerable.prototype.skipWhile)}(exjs||(exjs={}));var exjs;!function(t){function e(t,e){var r,n=0,o={current:void 0,moveNext:function(){return r||(r=t.getEnumerator()),n++,n>e?!1:(o.current=void 0,r.moveNext()?(o.current=r.current,!0):!1)}};return o}function r(t,e){var r,n=0,o={current:void 0,moveNext:function(){return r||(r=t.getEnumerator()),r.moveNext()&&e(r.current,n)?(n++,o.current=r.current,!0):(o.current=void 0,!1)}};return o}t.Enumerable.prototype.take=function(r){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.Enumerable.prototype.takeWhile=function(e){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return r(n,e)},o},t.List&&(t.List.prototype.take=t.Enumerable.prototype.take,t.List.prototype.takeWhile=t.Enumerable.prototype.takeWhile)}(exjs||(exjs={}));var exjs;!function(t){function e(e,r){var n,o=!1,i=[],a={current:void 0,moveNext:function(){if(o){if(null==n)return!1;i.push(n),n=t.selectorEnumerator(r(a.current))}else n=e.getEnumerator(),o=!0;for(;!(n&&n.moveNext()||i.length<1);)n=i.pop();return a.current=null==n?void 0:n.current,void 0!==a.current}};return a}function r(e,r,n){var o,i=!1,a=[],s={current:void 0,moveNext:function(){if(i){if(null==o)return!1;a.push(o),o=t.selectorEnumerator(r(s.current))}else o=e.getEnumerator(),i=!0;do{for(;!(o&&o.moveNext()||a.length<1);)o=a.pop();s.current=null==o?void 0:o.current}while(n(s.current));return void 0!==s.current}};return s}t.Enumerable.prototype.traverse=function(r){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.Enumerable.prototype.traverseUnique=function(e,n){var o=this,i=[],a=new t.Enumerable;return n?a.getEnumerator=function(){return r(o,e,function(t){return i.some(function(e){return n(t,e)})?!0:(i.push(t),!1)})}:a.getEnumerator=function(){return r(o,e,function(t){return i.indexOf(t)>-1?!0:(i.push(t),!1)})},a},t.List&&(t.List.prototype.traverse=t.Enumerable.prototype.traverse,t.List.prototype.traverseUnique=t.Enumerable.prototype.traverseUnique)}(exjs||(exjs={}));var exjs;!function(t){function e(e,r,n){n=n||function(t,e){return t===e};var o,i,a=[],s={current:void 0,moveNext:function(){if(o||(o=t.en(e).distinct().getEnumerator()),s.current=void 0,!i&&o.moveNext())return a.push(s.current=o.current),!0;for(i=i||t.en(r).distinct().getEnumerator();i.moveNext();){for(var u=0,c=!1,f=a.length;f>u&&!c;u++)c=n(a[u],i.current);if(!c)return s.current=i.current,!0}return!1}};return s}t.Enumerable.prototype.union=function(r,n){var o=this,i=r instanceof Array?r.en():r,a=new t.Enumerable;return a.getEnumerator=function(){return e(o,i,n)},a},t.List&&(t.List.prototype.union=t.Enumerable.prototype.union)}(exjs||(exjs={}));var exjs;!function(t){function e(t,e){var r,n={current:void 0,moveNext:function(){r||(r=t.getEnumerator());for(var o;r.moveNext();)if(e(o=r.current))return n.current=o,!0;return!1}};return n}t.Enumerable.prototype.where=function(r){var n=this,o=new t.Enumerable;return o.getEnumerator=function(){return e(n,r)},o},t.List&&(t.List.prototype.where=t.Enumerable.prototype.where)}(exjs||(exjs={}));var exjs;!function(t){function e(e){var n=new t.Enumerable;return n.getEnumerator=function(){return r(e)},n}function r(t){var e=t.getEnumerator(),r={current:void 0,moveNext:void 0};return r.moveNext=function(){return e.moveNext()?(r.current=e.current,!0):(r.current=void 0,!1)},r}t.en=e}(exjs||(exjs={}));var ex=exjs.en,exjs;!function(t){function e(t,e,r){var n,o,i={current:void 0,moveNext:function(){return n||(n=t.getEnumerator()),o||(o=e.getEnumerator()),i.current=void 0,n.moveNext()&&o.moveNext()?(i.current=r(n.current,o.current),!0):!1}};return i}t.Enumerable.prototype.zip=function(r,n){var o=this,i=r instanceof Array?r.en():r,a=new t.Enumerable;return a.getEnumerator=function(){return e(o,i,n)},a},t.List&&(t.List.prototype.zip=t.Enumerable.prototype.zip)}(exjs||(exjs={})),Array.prototype.clone||(Array.prototype.clone=function(){return this.slice(0)}),Array.prototype.contains||(Array.prototype.contains=function(t){return-1!==this.indexOf(t)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var r=e||0,n=this.length;for(r;n>r;r++)if(this[r]===t)return r;return-1}),Array.prototype.indexOfTest=function(t,e){var r=e||0,n=this.length;for(r;n>r;r++)if(t(this[r]))return r;return-1},Array.prototype.insert=function(t,e){this.splice(e,0,t)},Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]}),Array.prototype.move=function(t,e){this.splice(e,0,this.splice(t,1)[0])},Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},Array.prototype.removeAt=function(t){this.splice(t,1)},Math.clamp=function(t,e,r){return Math.min(Math.max(t,e),r)},Math.constrain=function(t,e,r){return Math.clamp(t,e,r)},Math.degreesToRadians=function(t){return Math.TAU*(t/360)},Math.distanceBetween=function(t,e,r,n){return Math.sqrt(Math.sq(r-t)+Math.sq(n-e))},Math.lerp=function(t,e,r){return t+(e-t)*r},Math.mag=function(t,e,r){return Math.sqrt(t*t+e*e+r*r)},Math.map=function(t,e,r,n,o){return n+(o-n)*((t-e)/(r-e))},Math.median=function(t){t.sort(function(t,e){return t-e});var e=Math.floor(t.length/2);return t.length%2?t[e]:(t[e-1]+t[e])/2},Math.normalise=function(t,e,r){return(t-e)/(r-e)},Math.radiansToDegrees=function(t){return 360*t/Math.TAU},Math.randomBetween=function(t,e){return e||(e=t,t=0),t>=e?t:t+(e-t)*Math.random()},Math.roundToDecimalPlace=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},Math.sq=function(t){return t*t},Math.TAU=2*Math.PI,Number.prototype.isInteger||(Number.prototype.isInteger=function(){return this%1===0}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var i=[];for(var a in o)t.call(o,a)&&i.push(a);if(e)for(var s=0;n>s;s++)t.call(o,r[s])&&i.push(r[s]);return i}}()),String.prototype.b64_to_utf8=function(){return decodeURIComponent(escape(window.atob(this)))},String.prototype.contains=function(t){return-1!==this.indexOf(t)},String.prototype.endsWith||(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)}),String.format=function(){for(var t=arguments[0],e=0;e<arguments.length-1;e++){var r=new RegExp("\\{"+e+"\\}","gm");t=t.replace(r,arguments[e+1])}return t},String.prototype.hashCode=function(){var t,e,r,n=0;if(0==this.length)return n;for(t=0,r=this.length;r>t;t++)e=this.charCodeAt(t),n=(n<<5)-n+e,n|=0;return n.toString()},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.startsWith||(String.prototype.startsWith=function(t){return 0==this.indexOf(t)}),String.prototype.toCssClass=function(){return this.replace(/[^a-z0-9]/g,function(t){var e=t.charCodeAt(0);return 32==e?"-":e>=65&&90>=e?"_"+t.toLowerCase():"__"+("000"+e.toString(16)).slice(-4)})},String.prototype.toFileName=function(){return this.replace(/[^a-z0-9]/gi,"_").toLowerCase()},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}),String.prototype.utf8_to_b64=function(){return window.btoa(unescape(encodeURIComponent(this)))},!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.manifesto=t()}}(function(){var t;return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return o(r?r:e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,r){(function(r){var n;!function(t){var e=function(){function t(t){this.value="",t&&(this.value=t.toLowerCase())}return t.prototype.toString=function(){return this.value},t}();t.StringValue=e}(n||(n={}));var n,o=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.bookmarking=function(){return new e(e.BOOKMARKING.toString())},e.prototype.classifying=function(){return new e(e.CLASSIFYING.toString())},e.prototype.commenting=function(){return new e(e.COMMENTING.toString())},e.prototype.describing=function(){return new e(e.DESCRIBING.toString())},e.prototype.editing=function(){return new e(e.EDITING.toString())},e.prototype.highlighting=function(){return new e(e.HIGHLIGHTING.toString())},e.prototype.identifying=function(){return new e(e.IDENTIFYING.toString())},e.prototype.linking=function(){return new e(e.LINKING.toString())},e.prototype.moderating=function(){return new e(e.MODERATING.toString())},e.prototype.painting=function(){return new e(e.PAINTING.toString())},e.prototype.questioning=function(){return new e(e.QUESTIONING.toString())},e.prototype.replying=function(){return new e(e.REPLYING.toString())},e.prototype.tagging=function(){return new e(e.TAGGING.toString())},e.prototype.transcribing=function(){return new e(e.TRANSCRIBING.toString())},e.BOOKMARKING=new e("oa:bookmarking"),e.CLASSIFYING=new e("oa:classifying"),e.COMMENTING=new e("oa:commenting"),e.DESCRIBING=new e("oa:describing"),e.EDITING=new e("oa:editing"),e.HIGHLIGHTING=new e("oa:highlighting"),e.IDENTIFYING=new e("oa:identifying"),e.LINKING=new e("oa:linking"),e.MODERATING=new e("oa:moderating"),e.PAINTING=new e("sc:painting"),e.QUESTIONING=new e("oa:questioning"),e.REPLYING=new e("oa:replying"),e.TAGGING=new e("oa:tagging"),e.TRANSCRIBING=new e("oad:transcribing"),e}(t.StringValue);t.AnnotationMotivation=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.canvas=function(){return new e(e.CANVAS.toString())},e.prototype.document=function(){return new e(e.DOCUMENT.toString())},e.prototype.image=function(){return new e(e.IMAGE.toString())},e.prototype.movingimage=function(){return new e(e.MOVINGIMAGE.toString())},e.prototype.physicalobject=function(){return new e(e.PHYSICALOBJECT.toString())},e.prototype.sound=function(){return new e(e.SOUND.toString())},e.CANVAS=new e("sc:canvas"),e.DOCUMENT=new e("foaf:document"),e.IMAGE=new e("dcTypes:image"),e.MOVINGIMAGE=new e("dctypes:movingimage"),e.PHYSICALOBJECT=new e("dctypes:physicalobject"),e.SOUND=new e("dctypes:sound"),e}(t.StringValue);t.ElementType=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.MANIFEST=new e("sc:manifest"),e.COLLECTION=new e("sc:collection"),e}(t.StringValue);t.IIIFResourceType=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.manuscript=function(){return new e(e.MANUSCRIPT.toString())},e.prototype.monograph=function(){return new e(e.MONOGRAPH.toString())},e.EMPTY=new e(""),e.MANUSCRIPT=new e("manuscript"),e.MONOGRAPH=new e("monograph"),e}(t.StringValue);t.ManifestType=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.pdf=function(){return new e(e.PDF.toString())},e.prototype.doc=function(){return new e(e.DOC.toString())},e.prototype.docx=function(){return new e(e.DOCX.toString())},e.PDF=new e("application/pdf"),e.DOC=new e("application/msword"),e.DOCX=new e("application/vnd.openxmlformats-officedocument.wordprocessingml.document"),e}(t.StringValue);t.RenderingFormat=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.jpgimage=function(){return new e(e.JPGIMAGE.toString())},e.prototype.pdf=function(){return new e(e.PDF.toString())},e.JPGIMAGE=new e("image/jpeg"),e.PDF=new e("application/pdf"),e}(t.StringValue);t.ResourceFormat=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.image=function(){return new e(e.IMAGE.toString())},e.IMAGE=new e("dctypes:image"),e}(t.StringValue);t.ResourceType=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.autoComplete=function(){return new e(e.AUTOCOMPLETE.toString())},e.prototype.iiif1ImageLevel1=function(){return new e(e.IIIF1IMAGELEVEL1.toString())},e.prototype.iiif1ImageLevel2=function(){return new e(e.IIIF1IMAGELEVEL2.toString())},e.prototype.iiif2ImageLevel1=function(){return new e(e.IIIF2IMAGELEVEL1.toString())},e.prototype.iiif2ImageLevel2=function(){return new e(e.IIIF2IMAGELEVEL2.toString())},e.prototype.ixif=function(){return new e(e.IXIF.toString())},e.prototype.login=function(){return new e(e.LOGIN.toString())},e.prototype.clickThrough=function(){return new e(e.CLICKTHROUGH.toString())},e.prototype.restricted=function(){return new e(e.RESTRICTED.toString())},e.prototype.logout=function(){return new e(e.LOGOUT.toString())},e.prototype.otherManifestations=function(){return new e(e.OTHERMANIFESTATIONS.toString())},e.prototype.searchWithin=function(){return new e(e.SEARCHWITHIN.toString())},e.prototype.stanfordIIIFImageCompliance1=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIFImageCompliance2=function(){return new e(e.STANFORDIIIFIMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIFImageConformance1=function(){
return new e(e.STANFORDIIIFIMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIFImageConformance2=function(){return new e(e.STANFORDIIIFIMAGECONFORMANCE2.toString())},e.prototype.stanfordIIIF1ImageCompliance1=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE1.toString())},e.prototype.stanfordIIIF1ImageCompliance2=function(){return new e(e.STANFORDIIIF1IMAGECOMPLIANCE2.toString())},e.prototype.stanfordIIIF1ImageConformance1=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE1.toString())},e.prototype.stanfordIIIF1ImageConformance2=function(){return new e(e.STANFORDIIIF1IMAGECONFORMANCE2.toString())},e.prototype.token=function(){return new e(e.TOKEN.toString())},e.prototype.trackingExtensions=function(){return new e(e.TRACKINGEXTENSIONS.toString())},e.prototype.uiExtensions=function(){return new e(e.UIEXTENSIONS.toString())},e.AUTOCOMPLETE=new e("http://iiif.io/api/search/0/autocomplete"),e.STANFORDIIIFIMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level0"),e.STANFORDIIIFIMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level1"),e.STANFORDIIIFIMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/compliance.html#level2"),e.STANFORDIIIFIMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level0"),e.STANFORDIIIFIMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level1"),e.STANFORDIIIFIMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/conformance.html#level2"),e.STANFORDIIIF1IMAGECOMPLIANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0"),e.STANFORDIIIF1IMAGECOMPLIANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1"),e.STANFORDIIIF1IMAGECOMPLIANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2"),e.STANFORDIIIF1IMAGECONFORMANCE0=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0"),e.STANFORDIIIF1IMAGECONFORMANCE1=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1"),e.STANFORDIIIF1IMAGECONFORMANCE2=new e("http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2"),e.IIIF1IMAGELEVEL0=new e("http://iiif.io/api/image/1/level0.json"),e.IIIF1IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/1/profiles/level0.json"),e.IIIF1IMAGELEVEL1=new e("http://iiif.io/api/image/1/level1.json"),e.IIIF1IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/1/profiles/level1.json"),e.IIIF1IMAGELEVEL2=new e("http://iiif.io/api/image/1/level2.json"),e.IIIF1IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/1/profiles/level2.json"),e.IIIF2IMAGELEVEL0=new e("http://iiif.io/api/image/2/level0.json"),e.IIIF2IMAGELEVEL0PROFILE=new e("http://iiif.io/api/image/2/profiles/level0.json"),e.IIIF2IMAGELEVEL1=new e("http://iiif.io/api/image/2/level1.json"),e.IIIF2IMAGELEVEL1PROFILE=new e("http://iiif.io/api/image/2/profiles/level1.json"),e.IIIF2IMAGELEVEL2=new e("http://iiif.io/api/image/2/level2.json"),e.IIIF2IMAGELEVEL2PROFILE=new e("http://iiif.io/api/image/2/profiles/level2.json"),e.IXIF=new e("http://wellcomelibrary.org/ld/ixif/0/alpha.json"),e.LOGIN=new e("http://iiif.io/api/auth/0/login"),e.CLICKTHROUGH=new e("http://iiif.io/api/auth/0/login/clickthrough"),e.RESTRICTED=new e("http://iiif.io/api/auth/0/login/restricted"),e.LOGOUT=new e("http://iiif.io/api/auth/0/logout"),e.OTHERMANIFESTATIONS=new e("http://iiif.io/api/otherManifestations.json"),e.SEARCHWITHIN=new e("http://iiif.io/api/search/0/search"),e.TOKEN=new e("http://iiif.io/api/auth/0/token"),e.TRACKINGEXTENSIONS=new e("http://universalviewer.io/tracking-extensions-profile"),e.UIEXTENSIONS=new e("http://universalviewer.io/ui-extensions-profile"),e}(t.StringValue);t.ServiceProfile=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.leftToRight=function(){return new e(e.LEFTTORIGHT.toString())},e.prototype.rightToLeft=function(){return new e(e.RIGHTTOLEFT.toString())},e.prototype.topToBottom=function(){return new e(e.TOPTOBOTTOM.toString())},e.prototype.bottomToTop=function(){return new e(e.BOTTOMTOTOP.toString())},e.LEFTTORIGHT=new e("left-to-right"),e.RIGHTTOLEFT=new e("right-to-left"),e.TOPTOBOTTOM=new e("top-to-bottom"),e.BOTTOMTOTOP=new e("bottom-to-top"),e}(t.StringValue);t.ViewingDirection=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.continuous=function(){return new e(e.CONTINUOUS.toString())},e.prototype.empty=function(){return new e(e.EMPTY.toString())},e.prototype.individuals=function(){return new e(e.INDIVIDUALS.toString())},e.prototype.nonPaged=function(){return new e(e.NONPAGED.toString())},e.prototype.paged=function(){return new e(e.PAGED.toString())},e.prototype.top=function(){return new e(e.TOP.toString())},e.CONTINUOUS=new e("continuous"),e.EMPTY=new e(""),e.INDIVIDUALS=new e("individuals"),e.NONPAGED=new e("non-paged"),e.PAGED=new e("paged"),e.TOP=new e("top"),e}(t.StringValue);t.ViewingHint=e}(n||(n={}));var n;!function(t){var e=function(){function t(t){this.__jsonld=t,this.context=this.getProperty("@context"),this.id=this.getProperty("@id")}return t.prototype.getProperty=function(t){return this.__jsonld[t]},t}();t.JSONLDResource=e}(n||(n={}));var n;!function(t){var e=function(e){function r(t,r){e.call(this,t),this.options=r}return o(r,e),r.prototype.getLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("label"),this.options.locale)},r.prototype.getMetadata=function(){var e=this.getProperty("metadata");if(!e)return[];for(var r=0;r<e.length;r++){var n=e[r];n.label=t.Utils.getLocalisedValue(n.label,this.options.locale),n.value=t.Utils.getLocalisedValue(n.value,this.options.locale)}return e},r.prototype.getRendering=function(t){var e=this.getRenderings();"string"!=typeof t&&(t=t.toString());for(var r=0;r<e.length;r++){var n=e[r];if(n.getFormat().toString()===t)return n}return null},r.prototype.getRenderings=function(){var e;e=this.__jsonld?this.__jsonld.rendering:this.rendering;var r=[];if(!e)return r;u(e)||(e=[e]);for(var n=0;n<e.length;n++){var o=e[n];r.push(new t.Rendering(o,this.options))}return r},r.prototype.getService=function(e){return t.Utils.getService(this,e)},r.prototype.getServices=function(){return t.Utils.getServices(this)},r}(t.JSONLDResource);t.ManifestResource=e}(n||(n={}));var n;!function(t){var e=function(e){function r(t,r){e.call(this,t,r)}return o(r,e),r.prototype.getResources=function(){var e=[];if(!this.__jsonld.resources)return e;for(var r=0;r<this.__jsonld.resources.length;r++){var n=this.__jsonld.resources[r],o=new t.Annotation(n,this.options);e.push(o)}return e},r.prototype.getType=function(){return new t.ElementType(this.getProperty("@type"))},r}(t.ManifestResource);t.Element=e}(n||(n={}));var n,i=t("lodash.endswith"),a=t("lodash.last");!function(t){var e=function(e){function r(t,r){e.call(this,t,r)}return o(r,e),r.prototype.getCanonicalImageUri=function(e){var r,n,o="full",i=0,a="default",s=e;if(this.externalResource&&this.externalResource.data)r=this.externalResource.data["@id"],s||(s=this.externalResource.data.width),(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(a="native");else{var u=this.getImages();if(!u||!u.length)return null;var c=u[0],f=c.getResource(),l=f.getServices();s||(s=f.getWidth());var h=l[0];r=h.id,a=t.Utils.getImageQuality(h.getProfile())}n=s+",";var p=[r,o,n,i,a+".jpg"].join("/");return p},r.prototype.getImages=function(){var e=[];if(!this.__jsonld.images)return e;for(var r=0;r<this.__jsonld.images.length;r++){var n=this.__jsonld.images[r],o=new t.Annotation(n,this.options);e.push(o)}return e},r.prototype.getIndex=function(){return this.getProperty("index")},r.prototype.getWidth=function(){return this.getProperty("width")},r.prototype.getHeight=function(){return this.getProperty("height")},r}(t.Element);t.Canvas=e}(n||(n={}));var n,s=t("lodash.assign");!function(t){var e=function(e){function r(t,r){e.call(this,t,r),this.index=0,this.isLoaded=!1;var n={defaultLabel:"-",locale:"en-GB",resource:this,pessimisticAccessControl:!1};this.options=s(n,r)}return o(r,e),r.prototype.generateTreeNodeIds=function(t,e){void 0===e&&(e=0);var r;r=t.parentNode?t.parentNode.id+"/"+e:"0",t.id=r.hashCode();for(var n=0;n<t.nodes.length;n++){var o=t.nodes[n];this.generateTreeNodeIds(o,n)}},r.prototype.getAttribution=function(){return t.Utils.getLocalisedValue(this.getProperty("attribution"),this.options.locale)},r.prototype.getDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("description"),this.options.locale)},r.prototype.getIIIFResourceType=function(){return new t.IIIFResourceType(this.getProperty("@type"))},r.prototype.getLogo=function(){var t=this.getProperty("logo");return t?f(t)?t:t["@id"]:null},r.prototype.getLicense=function(){return t.Utils.getLocalisedValue(this.getProperty("license"),this.options.locale)},r.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},r.prototype.getSeeAlso=function(){return t.Utils.getLocalisedValue(this.getProperty("seeAlso"),this.options.locale)},r.prototype.getLabel=function(){return t.Utils.getLocalisedValue(this.getProperty("label"),this.options.locale)},r.prototype.getTree=function(){return this.treeRoot=new t.TreeNode("root"),this.treeRoot.data=this,this.treeRoot},r.prototype.load=function(){var e=this;return new Promise(function(r,n){if(e.isLoaded)r(e);else{var o=e.options;o.navDate=e.getNavDate(),t.Utils.loadResource(e.__jsonld["@id"]).then(function(n){e.parentLabel=e.getLabel();var i=t.Deserialiser.parse(n,o);e=s(e,i),r(e)})}})},r}(t.ManifestResource);t.IIIFResource=e}(n||(n={}));var n,u=t("lodash.isarray"),c=t("lodash.map");!function(t){var e=function(e){function r(t,r){if(e.call(this,t,r),this.index=0,this._ranges=null,this._sequences=null,this.__jsonld.structures&&this.__jsonld.structures.length){var n=this._getRootRange();this._parseRanges(n,"")}}return o(r,e),r.prototype._getRootRange=function(){var e;if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var r=0;r<this.__jsonld.structures.length;r++){var n=this.__jsonld.structures[r];n.viewingHint===t.ViewingHint.TOP.toString()&&(e=n)}e||(e={},e.ranges=this.__jsonld.structures)}return e},r.prototype._getRangeById=function(t){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var e=0;e<this.__jsonld.structures.length;e++){var r=this.__jsonld.structures[e];if(r["@id"]===t)return r}return null},r.prototype._parseRanges=function(e,r,n){var o;if(f(e)&&(e=this._getRangeById(e)),o=new t.Range(e,this.options),n?(o.parentRange=n,n.ranges.push(o)):this.rootRange=o,o.path=r,e.ranges)for(var i=0;i<e.ranges.length;i++)this._parseRanges(e.ranges[i],r+"/"+i,o)},r.prototype.getRanges=function(){return null!=this._ranges?this._ranges:(this._ranges=[],this.rootRange&&(this._ranges=this.rootRange.ranges.en().traverseUnique(function(t){return t.ranges}).toArray()),this._ranges)},r.prototype.getRangeById=function(t){for(var e=this.getRanges(),r=0;r<e.length;r++){var n=e[r];if(n.id===t)return n}return null},r.prototype.getRangeByPath=function(t){for(var e=this.getRanges(),r=0;r<e.length;r++){var n=e[r];if(n.path===t)return n}return null},r.prototype.getSequences=function(){if(null!=this._sequences)return this._sequences;this._sequences=[];var e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(var r=0;r<e.length;r++){var n=e[r],o=new t.Sequence(n,this.options);this._sequences.push(o)}return this._sequences},r.prototype.getSequenceByIndex=function(t){return this.getSequences()[t]},r.prototype.getTotalSequences=function(){return this.getSequences().length},r.prototype.getTree=function(){if(e.prototype.getTree.call(this),this.treeRoot.data.type=t.TreeNodeType.MANIFEST.toString(),!this.isLoaded)return this.treeRoot;if(!this.rootRange)return this.treeRoot;if(this.treeRoot.data=this.rootRange,this.rootRange.treeNode=this.treeRoot,this.rootRange.ranges)for(var r=0;r<this.rootRange.ranges.length;r++){var n=this.rootRange.ranges[r],o=new t.TreeNode;this.treeRoot.addNode(o),this._parseTreeNode(o,n)}return this.generateTreeNodeIds(this.treeRoot),this.treeRoot},r.prototype._parseTreeNode=function(e,r){if(e.label=r.getLabel(),e.data=r,e.data.type=t.TreeNodeType.RANGE.toString(),r.treeNode=e,r.ranges)for(var n=0;n<r.ranges.length;n++){var o=r.ranges[n],i=new t.TreeNode;e.addNode(i),this._parseTreeNode(i,o)}},r.prototype.getManifestType=function(){var e=this.getService(t.ServiceProfile.UIEXTENSIONS);return e?new t.ManifestType(e.getProperty("manifestType")):new t.ManifestType("")},r.prototype.getTrackingLabel=function(){var e=this.getService(t.ServiceProfile.TRACKINGEXTENSIONS);return e?e.getProperty("trackingLabel"):""},r.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},r.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):t.ViewingDirection.LEFTTORIGHT},r.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):t.ViewingHint.EMPTY},r}(t.IIIFResource);t.Manifest=e}(n||(n={}));var n;!function(t){var e=function(e){function r(t,r){e.call(this,t,r),this.collections=[],this.manifests=[],t.__collection=this}return o(r,e),r.prototype.getCollectionByIndex=function(t){var e=this.collections[t];return e.load()},r.prototype.getManifestByIndex=function(t){var e=this.manifests[t];return e.load()},r.prototype.getTotalCollections=function(){return this.collections.length},r.prototype.getTotalManifests=function(){return this.manifests.length},r.prototype.getTree=function(){return e.prototype.getTree.call(this),this.treeRoot.data.type=t.TreeNodeType.COLLECTION.toString(),this._parseManifests(this),this._parseCollections(this),this.generateTreeNodeIds(this.treeRoot),this.treeRoot},r.prototype._parseManifests=function(e){if(e.manifests&&e.manifests.length)for(var r=0;r<e.manifests.length;r++){var n=e.manifests[r],o=n.getTree();o.label=n.parentLabel||n.getLabel()||"manifest "+(r+1),o.navDate=n.getNavDate(),o.data.id=n.id,o.data.type=t.TreeNodeType.MANIFEST.toString(),e.treeRoot.addNode(o)}},r.prototype._parseCollections=function(e){if(e.collections&&e.collections.length)for(var r=0;r<e.collections.length;r++){var n=e.collections[r],o=n.getTree();o.label=n.parentLabel||n.getLabel()||"collection "+(r+1),o.navDate=n.getNavDate(),o.data.id=n.id,o.data.type=t.TreeNodeType.COLLECTION.toString(),e.treeRoot.addNode(o),this._parseCollections(n)}},r}(t.IIIFResource);t.Collection=e}(n||(n={}));var n;!function(t){var e=function(e){function r(t,r){e.call(this,t,r),this.ranges=[]}return o(r,e),r.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:[]},r.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):null},r.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):null},r}(t.ManifestResource);t.Range=e}(n||(n={}));var n;!function(t){var e=function(e){function r(t,r){e.call(this,t,r)}return o(r,e),r.prototype.getFormat=function(){return new t.RenderingFormat(this.getProperty("format"))},r}(t.ManifestResource);t.Rendering=e}(n||(n={}));var n,a=t("lodash.last");!function(t){var e=function(e){function r(t,r){e.call(this,t,r),this.canvases=null}return o(r,e),r.prototype.getCanvases=function(){if(null!=this.canvases)return this.canvases;this.canvases=[];var e=this.__jsonld.elements||this.__jsonld.canvases;if(e)for(var r=0;r<e.length;r++){var n=e[r],o=new t.Canvas(n,this.options);o.index=r,this.canvases.push(o)}return this.canvases},r.prototype.getCanvasById=function(t){for(var e=0;e<this.getTotalCanvases();e++){var r=this.getCanvasByIndex(e);if(r.id===t)return r}return null},r.prototype.getCanvasByIndex=function(t){return this.getCanvases()[t]},r.prototype.getCanvasIndexById=function(t){for(var e=0;e<this.getTotalCanvases();e++){var r=this.getCanvasByIndex(e);if(r.id===t)return e}return null},r.prototype.getCanvasIndexByLabel=function(t,e){t=t.trim(),isNaN(t)||(t=parseInt(t,10).toString(),e&&(t+="r"));for(var r,n,o,i,a,s=/(\d*)\D+(\d*)/,u=0;u<this.getTotalCanvases();u++){var c=this.getCanvasByIndex(u);if(c.getLabel()===t)return u;if(r=s.exec(t),r&&(i=r[1],a=r[2],a&&(o="^"+i+"\\D+"+a+"$",n=new RegExp(o),n.test(c.getLabel()))))return u}return-1},r.prototype.getLastCanvasLabel=function(t){for(var e=this.getTotalCanvases()-1;e>=0;e--){var r=this.getCanvasByIndex(e),n=r.getLabel();if(t){var o=/^[a-zA-Z0-9]*$/;if(o.test(n))return n}else if(n)return n}return this.options.defaultLabel},r.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},r.prototype.getNextPageIndex=function(e,r){var n;if(r){var o=this.getPagedIndices(e);n=this.getViewingDirection().toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?o[0]+1:a(o)+1}else n=e+1;return n>this.getLastPageIndex()?-1:n},r.prototype.getPagedIndices=function(e,r){var n=[];return r?(n=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e],this.getViewingDirection().toString()===t.ViewingDirection.RIGHTTOLEFT.toString()&&(n=n.reverse())):n.push(e),n},r.prototype.getPrevPageIndex=function(e,r){var n;if(r){var o=this.getPagedIndices(e);n=this.getViewingDirection().toString()===t.ViewingDirection.RIGHTTOLEFT.toString()?a(o)-1:o[0]-1}else n=e-1;return n},r.prototype.getStartCanvasIndex=function(){var t=this.getStartCanvas();if(t)for(var e=0;e<this.getTotalCanvases();e++){var r=this.getCanvasByIndex(e);if(r.id===t)return e}return 0},r.prototype.getThumbs=function(e,r){for(var n=[],o=this.getTotalCanvases(),i=0;o>i;i++){var a=this.getCanvasByIndex(i);n.push(new t.Thumb(e,a))}return n},r.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},r.prototype.getTotalCanvases=function(){return this.getCanvases().length},r.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?new t.ViewingDirection(this.getProperty("viewingDirection")):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():t.ViewingDirection.LEFTTORIGHT},r.prototype.getViewingHint=function(){return this.getProperty("viewingHint")?new t.ViewingHint(this.getProperty("viewingHint")):t.ViewingHint.EMPTY},r.prototype.isCanvasIndexOutOfRange=function(t){return t>this.getTotalCanvases()-1},r.prototype.isFirstCanvas=function(t){return 0===t},r.prototype.isLastCanvas=function(t){return t===this.getTotalCanvases()-1},r.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},r.prototype.isPagingEnabled=function(){return this.getViewingHint().toString()===t.ViewingHint.PAGED.toString()},r.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2===0},r}(t.ManifestResource);t.Sequence=e}(n||(n={}));var n,f=t("lodash.isstring");!function(t){var e=function(){function e(){}return e.parse=function(t,e){return this.parseJson(JSON.parse(t),e)},e.parseJson=function(t,e){var r;switch(e&&e.navDate&&!isNaN(e.navDate.getTime())&&(t.navDate=e.navDate.toString()),t["@type"]){case"sc:Collection":r=this.parseCollection(t,e);break;case"sc:Manifest":r=this.parseManifest(t,e);break;default:return null}return r.isLoaded=!0,r},e.parseCollection=function(e,r){var n=new t.Collection(e,r);return this.parseCollections(n,r),this.parseManifests(n,r),n},e.parseCollections=function(t,e){var r=t.__jsonld.collections;if(r)for(var n=0;n<r.length;n++){var o=this.parseCollection(r[n],e);o.index=n,o.parentCollection=t,t.collections.push(o)}},e.parseManifest=function(e,r){return new t.Manifest(e,r)},e.parseManifests=function(t,e){var r=t.__jsonld.manifests;if(r)for(var n=0;n<r.length;n++){var o=this.parseManifest(r[n],e);o.index=n,o.parentCollection=t,t.manifests.push(o)}},e}();t.Deserialiser=e;var r=function(){function t(){}return t.serialise=function(t){return""},t}();t.Serialiser=r}(n||(n={}));var n,i=t("lodash.endswith"),u=t("lodash.isarray");!function(t){var e=function(e){function r(t,r){e.call(this,t,r)}return o(r,e),r.prototype.getProfile=function(){var e=this.getProperty("profile");return e||(e=this.getProperty("dcterms:conformsTo")),u(e)?new t.ServiceProfile(e[0]):new t.ServiceProfile(e)},r.prototype.getDescription=function(){return t.Utils.getLocalisedValue(this.getProperty("description"),this.options.locale)},r.prototype.getInfoUri=function(){var t=this.id;return i(t,"/")||(t+="/"),t+="info.json"},r}(t.ManifestResource);t.Service=e}(n||(n={}));var n;!function(t){var e=function(){function t(t,e){this.data=e,this.index=e.index,this.width=t;var r=e.getHeight()/e.getWidth();r&&(this.height=Math.floor(this.width*r)),this.uri=e.getCanonicalImageUri(t),this.label=e.getLabel()}return t}();t.Thumb=e}(n||(n={}));var n;!function(t){var e=function(){function e(t,e){this.label=t,this.data=e||{},this.nodes=[]}return e.prototype.addNode=function(t){this.nodes.push(t),t.parentNode=this},e.prototype.isCollection=function(){return this.data.type===t.TreeNodeType.COLLECTION.toString()},e.prototype.isManifest=function(){return this.data.type===t.TreeNodeType.MANIFEST.toString()},e.prototype.isRange=function(){return this.data.type===t.TreeNodeType.RANGE.toString()},e}();t.TreeNode=e}(n||(n={}));var n;!function(t){var e=function(t){function e(){t.apply(this,arguments)}return o(e,t),e.prototype.collection=function(){return new e(e.COLLECTION.toString())},e.prototype.manifest=function(){return new e(e.MANIFEST.toString())},e.prototype.range=function(){return new e(e.RANGE.toString())},e.COLLECTION=new e("sc:collection"),e.MANIFEST=new e("sc:manifest"),e.RANGE=new e("sc:range"),e}(t.StringValue);t.TreeNodeType=e}(n||(n={}));var n,l=t("http"),h=t("url");!function(t){var e=function(){function e(){}return e.getImageQuality=function(e){var r=e.toString();return r===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString()||r===t.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString()||r===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString()||r===t.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString()||r===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString()||r===t.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString()||r===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString()||r===t.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString()||r===t.ServiceProfile.IIIF1IMAGELEVEL1.toString()||r===t.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString()||r===t.ServiceProfile.IIIF1IMAGELEVEL2.toString()||r===t.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString()?"native":"default"},e.getLocalisedValue=function(t,e){if(!u(t))return t;for(var r=0;r<t.length;r++){var n=t[r],o=n["@language"];if(e===o)return n["@value"]}for(var i=e.substr(0,e.indexOf("-")),r=0;r<t.length;r++){var n=t[r],o=n["@language"];if(o===i)return n["@value"]}return null},e.loadResource=function(t){return new Promise(function(e,r){var n=h.parse(t),o=l.request({host:n.hostname,port:n.port,path:n.pathname,method:"GET",withCredentials:!1},function(t){var r="";t.on("data",function(t){r+=t}),t.on("end",function(){e(r)})});o.on("error",function(t){r(t)}),o.end()})},e.loadExternalResource=function(t,r,n,o,i,a,s,u,c,f){return new Promise(function(l,h){f&&f.pessimisticAccessControl?t.getData().then(function(){t.isAccessControlled()?t.clickThroughService?l(n(t)):t.restrictedService?l(o(t)):i(t).then(function(){a(t,!0).then(function(r){t.getData(r).then(function(){l(c(t))})["catch"](function(t){h(e.createInternalServerError(t))})})["catch"](function(t){h(e.createInternalServerError(t))})})["catch"](function(t){h(e.createInternalServerError(t))}):l(t)})["catch"](function(t){h(e.createInternalServerError(t))}):u(t,r).then(function(f){f?t.getData(f).then(function(){t.status===HTTPStatusCode.OK?l(c(t)):e.authorize(t,r,n,o,i,a,s,u).then(function(){l(c(t))})["catch"](function(r){h(t.restrictedService?e.createRestrictedError():e.createAuthorizationFailedError())})})["catch"](function(t){h(e.createAuthorizationFailedError())}):e.authorize(t,r,n,o,i,a,s,u).then(function(){l(c(t))})["catch"](function(t){h(e.createAuthorizationFailedError())})})["catch"](function(t){h(e.createAuthorizationFailedError())})})},e.createError=function(t,e){var r=new Error;return r.message=e,r.name=t,r},e.createAuthorizationFailedError=function(){return e.createError(manifesto.StatusCodes.AUTHORIZATION_FAILED.toString(),"Authorization failed")},e.createRestrictedError=function(){return e.createError(manifesto.StatusCodes.RESTRICTED.toString(),"Restricted")},e.createInternalServerError=function(t){return e.createError(manifesto.StatusCodes.INTERNAL_SERVER_ERROR.toString(),t)},e.loadExternalResources=function(t,r,n,o,i,a,s,u,f,l){return new Promise(function(h,p){var d=c(t,function(t){return e.loadExternalResource(t,r,n,o,i,a,s,u,f,l)});Promise.all(d).then(function(){h(t)})["catch"](function(t){p(t)})})},e.authorize=function(t,r,n,o,i,a,s,u){return new Promise(function(c,f){t.getData().then(function(){t.isAccessControlled()?u(t,r).then(function(u){u?t.getData(u).then(function(){t.status===HTTPStatusCode.OK?c(t):e.showAuthInteraction(t,r,n,o,i,a,s,c,f)})["catch"](function(t){f(e.createInternalServerError(t))}):a(t,!1).then(function(u){u?s(t,u,r).then(function(){t.getData(u).then(function(){t.status===HTTPStatusCode.OK?c(t):e.showAuthInteraction(t,r,n,o,i,a,s,c,f)})["catch"](function(t){f(e.createInternalServerError(t))})})["catch"](function(t){f(e.createInternalServerError(t))}):e.showAuthInteraction(t,r,n,o,i,a,s,c,f)})})["catch"](function(t){f(e.createInternalServerError(t))}):c(t)})})},e.showAuthInteraction=function(t,r,n,o,i,a,s,u,c){t.status!==HTTPStatusCode.MOVED_TEMPORARILY||t.isResponseHandled?t.restrictedService?u(o(t)):t.clickThroughService&&!t.isResponseHandled?n(t).then(function(){a(t,!0).then(function(n){s(t,n,r).then(function(){t.getData(n).then(function(){u(t)})["catch"](function(t){c(e.createInternalServerError(t))})})["catch"](function(t){c(e.createInternalServerError(t))})})["catch"](function(t){c(e.createInternalServerError(t))})}):i(t).then(function(){a(t,!0).then(function(n){s(t,n,r).then(function(){t.getData(n).then(function(){u(t)})["catch"](function(t){c(e.createInternalServerError(t))})})["catch"](function(t){c(e.createInternalServerError(t))})})["catch"](function(t){c(e.createInternalServerError(t))})}):u(t)},e.getService=function(t,e){var r=this.getServices(t);"string"!=typeof e&&(e=e.toString());for(var n=0;n<r.length;n++){var o=r[n];if(o.getProfile().toString()===e)return o}return null},e.getServiceByReference=function(e,r){for(var n,o=this.getServices(e.options.resource),i=0;i<o.length;i++){var a=o[i];if(a.id===r){n=new t.Service(a.__jsonld,e.options);break}}return n},e.getServices=function(e){var r;r=e.__jsonld?e.__jsonld.service:e.service;var n=[];if(!r)return n;u(r)||(r=[r]);for(var o=0;o<r.length;o++){var i=r[o];f(i)&&e!==e.options.resource?n.push(this.getServiceByReference(e,i)):n.push(new t.Service(i,e.options))}return n},e}();t.Utils=e}(n||(n={})),r.manifesto=e.exports={AnnotationMotivation:new n.AnnotationMotivation,ElementType:new n.ElementType,IIIFResourceType:new n.IIIFResourceType,ManifestType:new n.ManifestType,RenderingFormat:new n.RenderingFormat,ResourceFormat:new n.ResourceFormat,ResourceType:new n.ResourceType,ServiceProfile:new n.ServiceProfile,TreeNodeType:new n.TreeNodeType,ViewingDirection:new n.ViewingDirection,ViewingHint:new n.ViewingHint,StatusCodes:{AUTHORIZATION_FAILED:1,FORBIDDEN:2,INTERNAL_SERVER_ERROR:3,RESTRICTED:4},create:function(t,e){return n.Deserialiser.parse(t,e)},getService:function(t,e){return n.Utils.getService(t,e)},getTreeNode:function(){return new n.TreeNode},isImageProfile:function(t){return t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString()||t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString()||t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString()||t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString()||t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString()||t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE0.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL0.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL1.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL2.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL0.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL1.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL2.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()},isLevel0ImageProfile:function(t){return t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE0.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE0.toString()||t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE0.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE0.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL0.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL0PROFILE.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL0.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL0PROFILE.toString()},isLevel1ImageProfile:function(t){return t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE1.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE1.toString()||t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE1.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE1.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL1.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL1PROFILE.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL1.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL1PROFILE.toString()},isLevel2ImageProfile:function(t){return t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECOMPLIANCE2.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECOMPLIANCE2.toString()||t.toString()===n.ServiceProfile.STANFORDIIIFIMAGECONFORMANCE2.toString()||t.toString()===n.ServiceProfile.STANFORDIIIF1IMAGECONFORMANCE2.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL2.toString()||t.toString()===n.ServiceProfile.IIIF1IMAGELEVEL2PROFILE.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL2.toString()||t.toString()===n.ServiceProfile.IIIF2IMAGELEVEL2PROFILE.toString()},loadExternalResources:function(t,e,r,o,i,a,s,u,c,f){return n.Utils.loadExternalResources(t,e,r,o,i,a,s,u,c,f)},loadManifest:function(t){return n.Utils.loadResource(t)}};var n;!function(t){var e=function(e){function r(t,r){e.call(this,t,r)}return o(r,e),r.prototype.getMotivation=function(){return new t.AnnotationMotivation(this.getProperty("motivation").toLowerCase())},r.prototype.getOn=function(){return this.getProperty("on")},r.prototype.getResource=function(){return new t.Resource(this.getProperty("resource"),this.options)},r}(t.ManifestResource);t.Annotation=e}(n||(n={}));var n;!function(t){var e=function(e){function r(t,r){e.call(this,t,r)}return o(r,e),r.prototype.getFormat=function(){
return new t.ResourceFormat(this.getProperty("format").toLowerCase())},r.prototype.getType=function(){return new t.ResourceType(this.getProperty("@type").toLowerCase())},r.prototype.getWidth=function(){return this.getProperty("width")},r.prototype.getHeight=function(){return this.getProperty("height")},r.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},r.prototype.getMaxHeight=function(){var t=this.getProperty("maxHeight");return t?void 0:this.getMaxWidth()},r}(t.ManifestResource);t.Resource=e}(n||(n={}))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{http:6,"lodash.assign":27,"lodash.endswith":37,"lodash.isarray":39,"lodash.isstring":40,"lodash.last":41,"lodash.map":42,url:24}],2:[function(t,e,r){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);var o=typeof t;if("base64"===e&&"string"===o)for(t=O(t);t.length%4!==0;)t+="=";var i;if("number"===o)i=T(t);else if("string"===o)i=n.byteLength(t,e);else{if("object"!==o)throw new Error("First argument needs to be a number, array or string.");i=T(t.length)}var a;n._useTypedArrays?a=n._augment(new Uint8Array(i)):(a=this,a.length=i,a._isBuffer=!0);var s;if(n._useTypedArrays&&"number"==typeof t.byteLength)a._set(t);else if(C(t))for(s=0;i>s;s++)n.isBuffer(t)?a[s]=t.readUInt8(s):a[s]=t[s];else if("string"===o)a.write(t,0,e);else if("number"===o&&!n._useTypedArrays&&!r)for(s=0;i>s;s++)a[s]=0;return a}function o(t,e,r,o){r=Number(r)||0;var i=t.length-r;o?(o=Number(o),o>i&&(o=i)):o=i;var a=e.length;H(a%2===0,"Invalid hex string"),o>a/2&&(o=a/2);for(var s=0;o>s;s++){var u=parseInt(e.substr(2*s,2),16);H(!isNaN(u),"Invalid hex string"),t[r+s]=u}return n._charsWritten=2*s,s}function i(t,e,r,o){var i=n._charsWritten=G(_(e),t,r,o);return i}function a(t,e,r,o){var i=n._charsWritten=G(F(e),t,r,o);return i}function s(t,e,r,n){return a(t,e,r,n)}function u(t,e,r,o){var i=n._charsWritten=G(D(e),t,r,o);return i}function c(t,e,r,o){var i=n._charsWritten=G(P(e),t,r,o);return i}function f(t,e,r){return 0===e&&r===t.length?q.fromByteArray(t):q.fromByteArray(t.slice(e,r))}function l(t,e,r){var n="",o="";r=Math.min(t.length,r);for(var i=e;r>i;i++)t[i]<=127?(n+=k(o)+String.fromCharCode(t[i]),o=""):o+="%"+t[i].toString(16);return n+k(o)}function h(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;r>o;o++)n+=String.fromCharCode(t[o]);return n}function p(t,e,r){return h(t,e,r)}function d(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var o="",i=e;r>i;i++)o+=R(t[i]);return o}function g(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function v(t,e,r,n){n||(H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==e&&null!==e,"missing offset"),H(e+1<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i;return r?(i=t[e],o>e+1&&(i|=t[e+1]<<8)):(i=t[e]<<8,o>e+1&&(i|=t[e+1])),i}}function y(t,e,r,n){n||(H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==e&&null!==e,"missing offset"),H(e+3<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i;return r?(o>e+2&&(i=t[e+2]<<16),o>e+1&&(i|=t[e+1]<<8),i|=t[e],o>e+3&&(i+=t[e+3]<<24>>>0)):(o>e+1&&(i=t[e+1]<<16),o>e+2&&(i|=t[e+2]<<8),o>e+3&&(i|=t[e+3]),i+=t[e]<<24>>>0),i}}function m(t,e,r,n){n||(H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==e&&null!==e,"missing offset"),H(e+1<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i=v(t,e,r,!0),a=32768&i;return a?-1*(65535-i+1):i}}function w(t,e,r,n){n||(H("boolean"==typeof r,"missing or invalid endian"),H(void 0!==e&&null!==e,"missing offset"),H(e+3<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i=y(t,e,r,!0),a=2147483648&i;return a?-1*(4294967295-i+1):i}}function I(t,e,r,n){return n||(H("boolean"==typeof r,"missing or invalid endian"),H(e+3<t.length,"Trying to read beyond buffer length")),z.read(t,e,r,23,4)}function E(t,e,r,n){return n||(H("boolean"==typeof r,"missing or invalid endian"),H(e+7<t.length,"Trying to read beyond buffer length")),z.read(t,e,r,52,8)}function b(t,e,r,n,o){o||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==r&&null!==r,"missing offset"),H(r+1<t.length,"trying to write beyond buffer length"),B(e,65535));var i=t.length;if(!(r>=i))for(var a=0,s=Math.min(i-r,2);s>a;a++)t[r+a]=(e&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function S(t,e,r,n,o){o||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==r&&null!==r,"missing offset"),H(r+3<t.length,"trying to write beyond buffer length"),B(e,4294967295));var i=t.length;if(!(r>=i))for(var a=0,s=Math.min(i-r,4);s>a;a++)t[r+a]=e>>>8*(n?a:3-a)&255}function A(t,e,r,n,o){o||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==r&&null!==r,"missing offset"),H(r+1<t.length,"Trying to write beyond buffer length"),U(e,32767,-32768));var i=t.length;r>=i||(e>=0?b(t,e,r,n,o):b(t,65535+e+1,r,n,o))}function N(t,e,r,n,o){o||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==r&&null!==r,"missing offset"),H(r+3<t.length,"Trying to write beyond buffer length"),U(e,2147483647,-2147483648));var i=t.length;r>=i||(e>=0?S(t,e,r,n,o):S(t,4294967295+e+1,r,n,o))}function L(t,e,r,n,o){o||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==r&&null!==r,"missing offset"),H(r+3<t.length,"Trying to write beyond buffer length"),V(e,3.4028234663852886e38,-3.4028234663852886e38));var i=t.length;r>=i||z.write(t,e,r,n,23,4)}function x(t,e,r,n,o){o||(H(void 0!==e&&null!==e,"missing value"),H("boolean"==typeof n,"missing or invalid endian"),H(void 0!==r&&null!==r,"missing offset"),H(r+7<t.length,"Trying to write beyond buffer length"),V(e,1.7976931348623157e308,-1.7976931348623157e308));var i=t.length;r>=i||z.write(t,e,r,n,52,8)}function O(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t,e,r){return"number"!=typeof t?r:(t=~~t,t>=e?e:t>=0?t:(t+=e,t>=0?t:0))}function T(t){return t=~~Math.ceil(+t),0>t?0:t}function j(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function C(t){return j(t)||n.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function R(t){return 16>t?"0"+t.toString(16):t.toString(16)}function _(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);if(127>=n)e.push(t.charCodeAt(r));else{var o=r;n>=55296&&57343>=n&&r++;for(var i=encodeURIComponent(t.slice(o,r+1)).substr(1).split("%"),a=0;a<i.length;a++)e.push(parseInt(i[a],16))}}return e}function F(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function P(t){for(var e,r,n,o=[],i=0;i<t.length;i++)e=t.charCodeAt(i),r=e>>8,n=e%256,o.push(n),o.push(r);return o}function D(t){return q.toByteArray(t)}function G(t,e,r,n){for(var o=0;n>o&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}function k(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function B(t,e){H("number"==typeof t,"cannot write a non-number as a number"),H(t>=0,"specified a negative value for writing an unsigned value"),H(e>=t,"value is larger than maximum value for type"),H(Math.floor(t)===t,"value has a fractional component")}function U(t,e,r){H("number"==typeof t,"cannot write a non-number as a number"),H(e>=t,"value larger than maximum allowed value"),H(t>=r,"value smaller than minimum allowed value"),H(Math.floor(t)===t,"value has a fractional component")}function V(t,e,r){H("number"==typeof t,"cannot write a non-number as a number"),H(e>=t,"value larger than maximum allowed value"),H(t>=r,"value smaller than minimum allowed value")}function H(t,e){if(!t)throw new Error(e||"Failed assertion")}var q=t("base64-js"),z=t("ieee754");r.Buffer=n,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,n.poolSize=8192,n._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(r){return!1}}(),n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.isBuffer=function(t){return!(null===t||void 0===t||!t._isBuffer)},n.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"hex":r=t.length/2;break;case"utf8":case"utf-8":r=_(t).length;break;case"ascii":case"binary":case"raw":r=t.length;break;case"base64":r=D(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;default:throw new Error("Unknown encoding")}return r},n.concat=function(t,e){if(H(j(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new n(0);if(1===t.length)return t[0];var r;if("number"!=typeof e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var o=new n(e),i=0;for(r=0;r<t.length;r++){var a=t[r];a.copy(o,i),i+=a.length}return o},n.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var f=n;n=e,e=r,r=f}e=Number(e)||0;var l=this.length-e;r?(r=Number(r),r>l&&(r=l)):r=l,n=String(n||"utf8").toLowerCase();var h;switch(n){case"hex":h=o(this,t,e,r);break;case"utf8":case"utf-8":h=i(this,t,e,r);break;case"ascii":h=a(this,t,e,r);break;case"binary":h=s(this,t,e,r);break;case"base64":h=u(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=c(this,t,e,r);break;default:throw new Error("Unknown encoding")}return h},n.prototype.toString=function(t,e,r){var n=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,r=void 0!==r?Number(r):r=n.length,r===e)return"";var o;switch(t){case"hex":o=d(n,e,r);break;case"utf8":case"utf-8":o=l(n,e,r);break;case"ascii":o=h(n,e,r);break;case"binary":o=p(n,e,r);break;case"base64":o=f(n,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=g(n,e,r);break;default:throw new Error("Unknown encoding")}return o},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.copy=function(t,e,r,o){var i=this;if(r||(r=0),o||0===o||(o=this.length),e||(e=0),o!==r&&0!==t.length&&0!==i.length){H(o>=r,"sourceEnd < sourceStart"),H(e>=0&&e<t.length,"targetStart out of bounds"),H(r>=0&&r<i.length,"sourceStart out of bounds"),H(o>=0&&o<=i.length,"sourceEnd out of bounds"),o>this.length&&(o=this.length),t.length-e<o-r&&(o=t.length-e+r);var a=o-r;if(100>a||!n._useTypedArrays)for(var s=0;a>s;s++)t[s+e]=this[s+r];else t._set(this.subarray(r,r+a),e)}},n.prototype.slice=function(t,e){var r=this.length;if(t=M(t,r,0),e=M(e,r,r),n._useTypedArrays)return n._augment(this.subarray(t,e));for(var o=e-t,i=new n(o,void 0,!0),a=0;o>a;a++)i[a]=this[a+t];return i},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.readUInt8=function(t,e){return e||(H(void 0!==t&&null!==t,"missing offset"),H(t<this.length,"Trying to read beyond buffer length")),t>=this.length?void 0:this[t]},n.prototype.readUInt16LE=function(t,e){return v(this,t,!0,e)},n.prototype.readUInt16BE=function(t,e){return v(this,t,!1,e)},n.prototype.readUInt32LE=function(t,e){return y(this,t,!0,e)},n.prototype.readUInt32BE=function(t,e){return y(this,t,!1,e)},n.prototype.readInt8=function(t,e){if(e||(H(void 0!==t&&null!==t,"missing offset"),H(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length)){var r=128&this[t];return r?-1*(255-this[t]+1):this[t]}},n.prototype.readInt16LE=function(t,e){return m(this,t,!0,e)},n.prototype.readInt16BE=function(t,e){return m(this,t,!1,e)},n.prototype.readInt32LE=function(t,e){return w(this,t,!0,e)},n.prototype.readInt32BE=function(t,e){return w(this,t,!1,e)},n.prototype.readFloatLE=function(t,e){return I(this,t,!0,e)},n.prototype.readFloatBE=function(t,e){return I(this,t,!1,e)},n.prototype.readDoubleLE=function(t,e){return E(this,t,!0,e)},n.prototype.readDoubleBE=function(t,e){return E(this,t,!1,e)},n.prototype.writeUInt8=function(t,e,r){r||(H(void 0!==t&&null!==t,"missing value"),H(void 0!==e&&null!==e,"missing offset"),H(e<this.length,"trying to write beyond buffer length"),B(t,255)),e>=this.length||(this[e]=t)},n.prototype.writeUInt16LE=function(t,e,r){b(this,t,e,!0,r)},n.prototype.writeUInt16BE=function(t,e,r){b(this,t,e,!1,r)},n.prototype.writeUInt32LE=function(t,e,r){S(this,t,e,!0,r)},n.prototype.writeUInt32BE=function(t,e,r){S(this,t,e,!1,r)},n.prototype.writeInt8=function(t,e,r){r||(H(void 0!==t&&null!==t,"missing value"),H(void 0!==e&&null!==e,"missing offset"),H(e<this.length,"Trying to write beyond buffer length"),U(t,127,-128)),e>=this.length||(t>=0?this.writeUInt8(t,e,r):this.writeUInt8(255+t+1,e,r))},n.prototype.writeInt16LE=function(t,e,r){A(this,t,e,!0,r)},n.prototype.writeInt16BE=function(t,e,r){A(this,t,e,!1,r)},n.prototype.writeInt32LE=function(t,e,r){N(this,t,e,!0,r)},n.prototype.writeInt32BE=function(t,e,r){N(this,t,e,!1,r)},n.prototype.writeFloatLE=function(t,e,r){L(this,t,e,!0,r)},n.prototype.writeFloatBE=function(t,e,r){L(this,t,e,!1,r)},n.prototype.writeDoubleLE=function(t,e,r){x(this,t,e,!0,r)},n.prototype.writeDoubleBE=function(t,e,r){x(this,t,e,!1,r)},n.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),H("number"==typeof t&&!isNaN(t),"value is not a number"),H(r>=e,"end < start"),r!==e&&0!==this.length){H(e>=0&&e<this.length,"start out of bounds"),H(r>=0&&r<=this.length,"end out of bounds");for(var n=e;r>n;n++)this[n]=t}},n.prototype.inspect=function(){for(var t=[],e=this.length,n=0;e>n;n++)if(t[n]=R(this[n]),n===r.INSPECT_MAX_BYTES){t[n+1]="...";break}return"<Buffer "+t.join(" ")+">"},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n._useTypedArrays)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var W=n.prototype;n._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=W.get,t.set=W.set,t.write=W.write,t.toString=W.toString,t.toLocaleString=W.toString,t.toJSON=W.toJSON,t.copy=W.copy,t.slice=W.slice,t.readUInt8=W.readUInt8,t.readUInt16LE=W.readUInt16LE,t.readUInt16BE=W.readUInt16BE,t.readUInt32LE=W.readUInt32LE,t.readUInt32BE=W.readUInt32BE,t.readInt8=W.readInt8,t.readInt16LE=W.readInt16LE,t.readInt16BE=W.readInt16BE,t.readInt32LE=W.readInt32LE,t.readInt32BE=W.readInt32BE,t.readFloatLE=W.readFloatLE,t.readFloatBE=W.readFloatBE,t.readDoubleLE=W.readDoubleLE,t.readDoubleBE=W.readDoubleBE,t.writeUInt8=W.writeUInt8,t.writeUInt16LE=W.writeUInt16LE,t.writeUInt16BE=W.writeUInt16BE,t.writeUInt32LE=W.writeUInt32LE,t.writeUInt32BE=W.writeUInt32BE,t.writeInt8=W.writeInt8,t.writeInt16LE=W.writeInt16LE,t.writeInt16BE=W.writeInt16BE,t.writeInt32LE=W.writeInt32LE,t.writeInt32BE=W.writeInt32BE,t.writeFloatLE=W.writeFloatLE,t.writeFloatBE=W.writeFloatBE,t.writeDoubleLE=W.writeDoubleLE,t.writeDoubleBE=W.writeDoubleBE,t.fill=W.fill,t.inspect=W.inspect,t.toArrayBuffer=W.toArrayBuffer,t}},{"base64-js":3,ieee754:4}],3:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===l?62:e===s||e===h?63:u>e?-1:u+10>e?e-u+26+26:f+26>e?e-f:c+26>e?e-c+26:void 0}function r(t){function r(t){c[l++]=t}var n,o,a,s,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new i(3*t.length/4-u),a=u>0?t.length-4:t.length;var l=0;for(n=0,o=0;a>n;n+=4,o+=3)s=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===u?(s=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&s)):1===u&&(s=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(s>>8&255),r(255&s)),c}function o(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,a,s=t.length%3,u="";for(o=0,a=t.length-s;a>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=r(i);switch(s){case 1:i=t[t.length-1],u+=e(i>>2),u+=e(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=e(i>>10),u+=e(i>>4&63),u+=e(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=o}("undefined"==typeof r?this.base64js={}:r)},{}],4:[function(t,e,r){r.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,f=-7,l=r?o-1:0,h=r?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-f)-1,p>>=-f,f+=s;f>0;i=256*i+t[e+l],l+=h,f-=8);for(a=i&(1<<-f)-1,i>>=-f,f+=n;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,n),i-=c}return(p?-1:1)*a*Math.pow(2,i-n)},r.write=function(t,e,r,n,o,i){var a,s,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+l>=1?h/u:h*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,o),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[r+p]=255&a,p+=d,a/=256,c-=8);t[r+p-d]|=128*g}},{}],5:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function i(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,i,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],s(r))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),u=1;n>u;u++)i[u-1]=arguments[u];r.apply(this,i)}else if(a(r)){for(n=arguments.length,i=new Array(n-1),u=1;n>u;u++)i[u-1]=arguments[u];for(c=r.slice(),n=c.length,u=0;n>u;u++)c[u].apply(this,i)}return!0},n.prototype.addListener=function(t,e){var r;if(!o(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned){var r;r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!o(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,i,s;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],i=r.length,n=-1,r===e||o(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(s=i;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],o(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?o(t._events[e])?1:t._events[e].length:0}},{}],6:[function(t,e,r){var n=e.exports,o=(t("events").EventEmitter,t("./lib/request")),i=t("url");n.request=function(t,e){"string"==typeof t&&(t=i.parse(t)),t||(t={}),t.host||t.port||(t.port=parseInt(window.location.port,10)),!t.host&&t.hostname&&(t.host=t.hostname),t.scheme||(t.scheme=window.location.protocol.split(":")[0]),t.host||(t.host=window.location.hostname||window.location.host),/:/.test(t.host)&&(t.port||(t.port=t.host.split(":")[1]),t.host=t.host.split(":")[0]),t.port||(t.port="https"==t.scheme?443:80);var r=new o(new a,t);return e&&r.on("response",e),r},n.get=function(t,e){t.method="GET";var r=n.request(t,e);return r.end(),r},n.Agent=function(){},n.Agent.defaultMaxSockets=4;var a=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],e=0;e<t.length;e++)try{var r=new window.ActiveXObject(t[e]);return function(){if(r){var n=r;return r=null,n}return new window.ActiveXObject(t[e])}}catch(n){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();n.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{"./lib/request":7,events:5,url:24}],7:[function(t,e,r){var n=t("stream"),o=t("./response"),i=t("Base64"),a=t("inherits"),s=e.exports=function(t,e){var r=this;r.writable=!0,r.xhr=t,r.body=[],r.uri=(e.scheme||"http")+"://"+e.host+(e.port?":"+e.port:"")+(e.path||"/"),"undefined"==typeof e.withCredentials&&(e.withCredentials=!0);try{t.withCredentials=e.withCredentials}catch(n){}if(t.open(e.method||"GET",r.uri,!0),r._headers={},e.headers)for(var a=u(e.headers),s=0;s<a.length;s++){var c=a[s];if(r.isSafeRequestHeader(c)){var f=e.headers[c];r.setHeader(c,f)}}e.auth&&this.setHeader("Authorization","Basic "+i.btoa(e.auth));var l=new o;l.on("close",function(){r.emit("close")}),l.on("ready",function(){r.emit("response",l)}),t.onreadystatechange=function(){t.__aborted||l.handle(t)}};a(s,n),s.prototype.setHeader=function(t,e){this._headers[t.toLowerCase()]=e},s.prototype.getHeader=function(t){return this._headers[t.toLowerCase()]},s.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},s.prototype.write=function(t){this.body.push(t)},s.prototype.destroy=function(t){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},s.prototype.end=function(t){void 0!==t&&this.body.push(t);for(var e=u(this._headers),r=0;r<e.length;r++){var n=e[r],o=this._headers[n];if(c(o))for(var i=0;i<o.length;i++)this.xhr.setRequestHeader(n,o[i]);else this.xhr.setRequestHeader(n,o)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(c(this.body[0])){for(var a=[],r=0;r<this.body.length;r++)a.push.apply(a,this.body[r]);this.xhr.send(a)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var s=0,r=0;r<this.body.length;r++)s+=this.body[r].length;for(var a=new this.body[0].constructor(s),f=0,r=0;r<this.body.length;r++)for(var l=this.body[r],i=0;i<l.length;i++)a[f++]=l[i];this.xhr.send(a)}else{for(var a="",r=0;r<this.body.length;r++)a+=this.body[r].toString();this.xhr.send(a)}},s.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],s.prototype.isSafeRequestHeader=function(t){return t?-1===f(s.unsafeHeaders,t.toLowerCase()):!1};var u=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},f=function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1}},{"./response":8,Base64:9,inherits:10,stream:17}],8:[function(t,e,r){function n(t){for(var e=t.getAllResponseHeaders().split(/\r?\n/),r={},n=0;n<e.length;n++){var o=e[n];if(""!==o){var i=o.match(/^([^:]+):\s*(.*)/);if(i){var a=i[1].toLowerCase(),s=i[2];void 0!==r[a]?u(r[a])?r[a].push(s):r[a]=[r[a],s]:r[a]=s}else r[o]=!0}}return r}var o=t("stream"),i=t("util"),a=e.exports=function(t){this.offset=0,this.readable=!0};i.inherits(a,o);var s={streaming:!0,status2:!0};a.prototype.getResponse=function(t){var e=String(t.responseType).toLowerCase();return"blob"===e?t.responseBlob||t.response:"arraybuffer"===e?t.response:t.responseText},a.prototype.getHeader=function(t){return this.headers[t.toLowerCase()]},a.prototype.handle=function(t){if(2===t.readyState&&s.status2){try{this.statusCode=t.status,this.headers=n(t)}catch(e){s.status2=!1}s.status2&&this.emit("ready")}else if(s.streaming&&3===t.readyState){try{this.statusCode||(this.statusCode=t.status,this.headers=n(t),this.emit("ready"))}catch(e){}try{this._emitData(t)}catch(e){s.streaming=!1}}else 4===t.readyState&&(this.statusCode||(this.statusCode=t.status,this.emit("ready")),this._emitData(t),t.error?this.emit("error",this.getResponse(t)):this.emit("end"),this.emit("close"))},a.prototype._emitData=function(t){var e=this.getResponse(t);return e.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(e,this.offset)),void(this.offset=e.byteLength)):void(e.length>this.offset&&(this.emit("data",e.slice(this.offset)),this.offset=e.length))};var u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{stream:17,util:26}],9:[function(t,e,r){!function(){function t(t){this.message=t}var e="undefined"!=typeof r?r:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var r,o,i=0,a=n,s="";e.charAt(0|i)||(a="=",i%1);s+=a.charAt(63&r>>8-i%1*8)){if(o=e.charCodeAt(i+=.75),o>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|o}return s}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,i=0,a=0,s="";o=e.charAt(a++);~o&&(r=i%4?64*r+o:o,i++%4)?s+=String.fromCharCode(255&r>>(-2*i&6)):0)o=n.indexOf(o);return s})}()},{}],10:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],11:[function(t,e,r){function n(){}var o=e.exports={};o.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.on=n,o.addListener=n,o.once=n,o.off=n,o.removeListener=n,o.removeAllListeners=n,o.emit=n,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],12:[function(e,r,n){(function(e){!function(o){function i(t){throw RangeError(_[t])}function a(t,e){for(var r=t.length;r--;)t[r]=e(t[r]);return t}function s(t,e){return a(t.split(R),e).join(".")}function u(t){for(var e,r,n=[],o=0,i=t.length;i>o;)e=t.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function c(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function f(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:S}function l(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function h(t,e,r){var n=0;for(t=r?P(t/x):t>>1,t+=P(t/e);t>F*N>>1;n+=S)t=P(t/F);return P(n+(F+1)*t/(t+L))}function p(t){var e,r,n,o,a,s,u,l,p,d,g=[],v=t.length,y=0,m=M,w=O;for(r=t.lastIndexOf(T),0>r&&(r=0),n=0;r>n;++n)t.charCodeAt(n)>=128&&i("not-basic"),g.push(t.charCodeAt(n));for(o=r>0?r+1:0;v>o;){for(a=y,s=1,u=S;o>=v&&i("invalid-input"),l=f(t.charCodeAt(o++)),(l>=S||l>P((b-y)/s))&&i("overflow"),y+=l*s,p=w>=u?A:u>=w+N?N:u-w,!(p>l);u+=S)d=S-p,s>P(b/d)&&i("overflow"),s*=d;e=g.length+1,w=h(y-a,e,0==a),P(y/e)>b-m&&i("overflow"),m+=P(y/e),y%=e,g.splice(y++,0,m)}return c(g)}function d(t){var e,r,n,o,a,s,c,f,p,d,g,v,y,m,w,I=[];for(t=u(t),v=t.length,e=M,r=0,a=O,s=0;v>s;++s)g=t[s],128>g&&I.push(D(g));for(n=o=I.length,o&&I.push(T);v>n;){for(c=b,s=0;v>s;++s)g=t[s],g>=e&&c>g&&(c=g);for(y=n+1,c-e>P((b-r)/y)&&i("overflow"),r+=(c-e)*y,e=c,s=0;v>s;++s)if(g=t[s],e>g&&++r>b&&i("overflow"),g==e){for(f=r,p=S;d=a>=p?A:p>=a+N?N:p-a,!(d>f);p+=S)w=f-d,m=S-d,I.push(D(l(d+w%m,0))),f=P(w/m);I.push(D(l(f,0))),a=h(r,y,n==o),r=0,++n}++r,++e}return I.join("")}function g(t){return s(t,function(t){return j.test(t)?p(t.slice(4).toLowerCase()):t})}function v(t){return s(t,function(t){return C.test(t)?"xn--"+d(t):t})}var y="object"==typeof n&&n,m="object"==typeof r&&r&&r.exports==y&&r,w="object"==typeof e&&e;w.global!==w&&w.window!==w||(o=w);
var I,E,b=2147483647,S=36,A=1,N=26,L=38,x=700,O=72,M=128,T="-",j=/^xn--/,C=/[^ -~]/,R=/\x2E|\u3002|\uFF0E|\uFF61/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=S-A,P=Math.floor,D=String.fromCharCode;if(I={version:"1.2.4",ucs2:{decode:u,encode:c},decode:p,encode:d,toASCII:v,toUnicode:g},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return I});else if(y&&!y.nodeType)if(m)m.exports=I;else for(E in I)I.hasOwnProperty(E)&&(y[E]=I[E]);else o.punycode=I}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,i){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var f=0;c>f;++f){var l,h,p,d,g=t[f].replace(s,"%20"),v=g.indexOf(r);v>=0?(l=g.substr(0,v),h=g.substr(v+1)):(l=g,h=""),p=decodeURIComponent(l),d=decodeURIComponent(h),n(a,p)?o(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],14:[function(t,e,r){"use strict";function n(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var o=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?n(a(t),function(n){var a=encodeURIComponent(o(n))+r;return i(t[n])?t[n].map(function(t){return a+encodeURIComponent(o(t))}).join(e):a+encodeURIComponent(o(t[n]))}).join(e):s?encodeURIComponent(o(s))+r+encodeURIComponent(o(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],15:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":13,"./encode":14}],16:[function(t,e,r){function n(t){return this instanceof n?(s.call(this,t),u.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",o)):new n(t)}function o(){if(!this.allowHalfOpen&&!this._writableState.ended){var t=this;a(function(){t.end()})}}e.exports=n;var i=t("inherits"),a=t("process/browser.js").nextTick,s=t("./readable.js"),u=t("./writable.js");i(n,s),n.prototype.write=u.prototype.write,n.prototype.end=u.prototype.end,n.prototype._write=u.prototype._write},{"./readable.js":20,"./writable.js":22,inherits:10,"process/browser.js":18}],17:[function(t,e,r){function n(){o.call(this)}e.exports=n;var o=t("events").EventEmitter,i=t("inherits");i(n,o),n.Readable=t("./readable.js"),n.Writable=t("./writable.js"),n.Duplex=t("./duplex.js"),n.Transform=t("./transform.js"),n.PassThrough=t("./passthrough.js"),n.Stream=n,n.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function i(){f||(f=!0,t.end())}function a(){f||(f=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===o.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",r),t.removeListener("drain",n),c.removeListener("end",i),c.removeListener("close",a),c.removeListener("error",s),t.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",r),t.on("drain",n),t._isStdio||e&&e.end===!1||(c.on("end",i),c.on("close",a));var f=!1;return c.on("error",s),t.on("error",s),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},{"./duplex.js":16,"./passthrough.js":19,"./readable.js":20,"./transform.js":21,"./writable.js":22,events:5,inherits:10}],18:[function(t,e,r){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],19:[function(t,e,r){function n(t){return this instanceof n?void o.call(this,t):new n(t)}e.exports=n;var o=t("./transform.js"),i=t("inherits");i(n,o),n.prototype._transform=function(t,e,r){r(null,t)}},{"./transform.js":21,inherits:10}],20:[function(t,e,r){(function(r){function n(e,r){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(S||(S=t("string_decoder").StringDecoder),this.decoder=new S(e.encoding),this.encoding=e.encoding)}function o(t){return this instanceof o?(this._readableState=new n(t,this),this.readable=!0,void N.call(this)):new o(t)}function i(t,e,r,n,o){var i=c(e,r);if(i)t.emit("error",i);else if(null===r||void 0===r)e.reading=!1,e.ended||f(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!o){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&o){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else!e.decoder||o||n||(r=e.decoder.write(r)),e.length+=e.objectMode?1:r.length,o?e.buffer.unshift(r):(e.reading=!1,e.buffer.push(r)),e.needReadable&&l(t),p(t,e);else o||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function s(t){if(t>=M)t=M;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||null===t?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=s(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var r=null;return L.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||r||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.length>0?l(t):I(t)}function l(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?x(function(){h(t)}):h(t))}function h(t){t.emit("readable")}function p(t,e){e.readingMore||(e.readingMore=!0,x(function(){d(t,e)}))}function d(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&v(t)}}function v(t){function e(t,e,o){var i=t.write(r);!1===i&&n.awaitDrain++}var r,n=t._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=t.read());)if(1===n.pipesCount?e(n.pipes,0,null):E(n.pipes,e),t.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(A.listenerCount(t,"data")>0&&m(t))):void(n.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,v(this))}function m(t,e){var r=t._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var n=e||!1,o=!1;t.readable=!0,t.pipe=N.prototype.pipe,t.on=t.addListener=N.prototype.on,t.on("readable",function(){o=!0;for(var e;!n&&null!==(e=t.read());)t.emit("data",e);null===e&&(o=!1,t._readableState.needReadable=!0)}),t.pause=function(){n=!0,this.emit("pause")},t.resume=function(){n=!1,o?x(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function w(t,e){var r,n=e.buffer,o=e.length,i=!!e.decoder,a=!!e.objectMode;if(0===n.length)return null;if(0===o)r=null;else if(a)r=n.shift();else if(!t||t>=o)r=i?n.join(""):L.concat(n,o),n.length=0;else if(t<n[0].length){var s=n[0];r=s.slice(0,t),n[0]=s.slice(t)}else if(t===n[0].length)r=n.shift();else{r=i?"":new L(t);for(var u=0,c=0,f=n.length;f>c&&t>u;c++){var s=n[0],l=Math.min(t-u,s.length);i?r+=s.slice(0,l):s.copy(r,u,0,l),l<s.length?n[0]=s.slice(l):n.shift(),u+=l}}return r}function I(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,x(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function E(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}function b(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1}e.exports=o,o.ReadableState=n;var S,A=t("events").EventEmitter,N=t("./index.js"),L=t("buffer").Buffer,x=t("process/browser.js").nextTick,O=t("inherits");O(o,N),o.prototype.push=function(t,e){var r=this._readableState;return"string"!=typeof t||r.objectMode||(e=e||r.defaultEncoding,e!==r.encoding&&(t=new L(t,e),e="")),i(this,r,t,e,!1)},o.prototype.unshift=function(t){var e=this._readableState;return i(this,e,t,"",!0)},o.prototype.setEncoding=function(e){S||(S=t("string_decoder").StringDecoder),this._readableState.decoder=new S(e),this._readableState.encoding=e};var M=8388608;o.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var r=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return l(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&I(this),null;var n=e.needReadable;e.length-t<=e.highWaterMark&&(n=!0),(e.ended||e.reading)&&(n=!1),n&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),n&&!e.reading&&(t=u(r,e));var o;return o=t>0?w(t,e):null,null===o&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&I(this),o},o.prototype._read=function(t){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(t,e){function n(t){t===f&&i()}function o(){t.end()}function i(){t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("drain",d),t.removeListener("error",a),t.removeListener("unpipe",n),f.removeListener("end",o),f.removeListener("end",i),t._writableState&&!t._writableState.needDrain||d()}function a(e){c(),0===m&&0===A.listenerCount(t,"error")&&t.emit("error",e)}function s(){t.removeListener("finish",u),c()}function u(){t.removeListener("close",s),c()}function c(){f.unpipe(t)}var f=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=t;break;case 1:l.pipes=[l.pipes,t];break;default:l.pipes.push(t)}l.pipesCount+=1;var h=(!e||e.end!==!1)&&t!==r.stdout&&t!==r.stderr,p=h?o:i;l.endEmitted?x(p):f.once("end",p),t.on("unpipe",n);var d=g(f);t.on("drain",d);var m=A.listenerCount(t,"error");return t.once("error",a),t.once("close",s),t.once("finish",u),t.emit("pipe",f),l.flowing||(this.on("readable",y),l.flowing=!0,x(function(){v(f)})),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1;for(var o=0;n>o;o++)r[o].emit("unpipe",this);return this}var o=b(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var r=N.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||m(this),"readable"===t&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&l(this,n):this.read(0))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){m(this),this.read(0),this.emit("resume")},o.prototype.pause=function(){m(this,!0),this.emit("pause")},o.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(o){if(e.decoder&&(o=e.decoder.write(o)),o&&(e.objectMode||o.length)){var i=n.push(o);i||(r=!0,t.pause())}});for(var o in t)"function"==typeof t[o]&&"undefined"==typeof this[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));var i=["error","close","destroy","pause","resume"];return E(i,function(e){t.on(e,function(t){return n.emit.apply(n,e,t)})}),n._read=function(e){r&&(r=!1,t.resume())},n},o._fromList=w}).call(this,t("ngpmcQ"))},{"./index.js":17,buffer:2,events:5,inherits:10,ngpmcQ:11,"process/browser.js":18,string_decoder:23}],21:[function(t,e,r){function n(t,e){this.afterTransform=function(t,r){return o(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function o(t,e,r){var n=t._transformState;n.transforming=!1;var o=n.writecb;if(!o)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&t.push(r),o&&o(e);var i=t._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&t._read(i.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);s.call(this,t);var e=(this._transformState=new n(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){a(e,t)}):a(e)})}function a(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=(t._readableState,t._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=i;var s=t("./duplex.js"),u=t("inherits");u(i,s),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,r){throw new Error("not implemented")},i.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./duplex.js":16,inherits:10}],22:[function(t,e,r){function n(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function o(t,e){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(e,t)},this.writecb=null,this.writelen=0,this.buffer=[]}function i(t){return this instanceof i||this instanceof S.Duplex?(this._writableState=new o(t,this),this.writable=!0,void S.call(this)):new i(t)}function a(t,e,r){var n=new Error("write after end");t.emit("error",n),A(function(){r(n)})}function s(t,e,r,n){var o=!0;if(!N.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!e.objectMode){var i=new TypeError("Invalid non-string/buffer chunk");t.emit("error",i),A(function(){n(i)}),o=!1}return o}function u(t,e,r){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new N(e,r)),e}function c(t,e,r,o,i){r=u(e,r,o);var a=e.objectMode?1:r.length;e.length+=a;var s=e.length<e.highWaterMark;return e.needDrain=!s,e.writing?e.buffer.push(new n(r,o,i)):f(t,e,a,r,o,i),s}function f(t,e,r,n,o,i){e.writelen=r,e.writecb=i,e.writing=!0,e.sync=!0,t._write(n,o,e.onwrite),e.sync=!1}function l(t,e,r,n,o){r?A(function(){o(n)}):o(n),t.emit("error",n)}function h(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var r=t._writableState,n=r.sync,o=r.writecb;if(h(r),e)l(t,r,n,e,o);else{var i=y(t,r);i||r.bufferProcessing||!r.buffer.length||v(t,r),n?A(function(){d(t,r,i,o)}):d(t,r,i,o)}}function d(t,e,r,n){r||g(t,e),n(),r&&m(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){e.bufferProcessing=!0;for(var r=0;r<e.buffer.length;r++){var n=e.buffer[r],o=n.chunk,i=n.encoding,a=n.callback,s=e.objectMode?1:o.length;if(f(t,e,s,o,i,a),e.writing){r++;break}}e.bufferProcessing=!1,r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function m(t,e){var r=y(t,e);return r&&(e.finished=!0,t.emit("finish")),r}function w(t,e,r){e.ending=!0,m(t,e),r&&(e.finished?A(r):t.once("finish",r)),e.ended=!0}e.exports=i,i.WritableState=o;var I="undefined"!=typeof Uint8Array?function(t){return t instanceof Uint8Array}:function(t){return t&&t.constructor&&"Uint8Array"===t.constructor.name},E="undefined"!=typeof ArrayBuffer?function(t){return t instanceof ArrayBuffer}:function(t){return t&&t.constructor&&"ArrayBuffer"===t.constructor.name},b=t("inherits"),S=t("./index.js"),A=t("process/browser.js").nextTick,N=t("buffer").Buffer;b(i,S),i.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},i.prototype.write=function(t,e,r){var n=this._writableState,o=!1;return"function"==typeof e&&(r=e,e=null),!N.isBuffer(t)&&I(t)&&(t=new N(t)),E(t)&&"undefined"!=typeof Uint8Array&&(t=new N(new Uint8Array(t))),N.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?a(this,n,r):s(this,n,t,r)&&(o=c(this,n,t,e,r)),o},i.prototype._write=function(t,e,r){r(new Error("not implemented"))},i.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),n.ending||n.finished||w(this,n,r)}},{"./index.js":17,buffer:2,inherits:10,"process/browser.js":18}],23:[function(t,e,r){function n(t){if(t&&!s.isEncoding(t))throw new Error("Unknown encoding: "+t)}function o(t){return t.toString(this.encoding)}function i(t){var e=this.charReceived=t.length%2;return this.charLength=e?2:0,e}function a(t){var e=this.charReceived=t.length%3;return this.charLength=e?3:0,e}var s=t("buffer").Buffer,u=r.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=o)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(t){for(var e="",r=0;this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,r,n),this.charReceived+=n-r,r=n,this.charReceived<this.charLength)return"";e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=e.charCodeAt(e.length-1);if(!(o>=55296&&56319>=o)){if(this.charReceived=this.charLength=0,n==t.length)return e;t=t.slice(n,t.length);break}this.charLength+=this.surrogateSize,e=""}var i=this.detectIncompleteChar(t),a=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-i,a),this.charReceived=i,a-=i),e+=t.toString(this.encoding,0,a);var a=e.length-1,o=e.charCodeAt(a);if(o>=55296&&56319>=o){var s=this.surrogateSize;return this.charLength+=s,this.charReceived+=s,this.charBuffer.copy(this.charBuffer,s,0,s),this.charBuffer.write(e.charAt(e.length-1),this.encoding),e.substring(0,a)}return e},u.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(2>=e&&r>>4==14){this.charLength=3;break}if(3>=e&&r>>3==30){this.charLength=4;break}}return e},u.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,o=this.encoding;e+=n.slice(0,r).toString(o)}return e}},{buffer:2}],24:[function(t,e,r){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,r){if(t&&c(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,r),o}function i(t){return u(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function a(t,e){return o(t,!1,!0).resolve(e)}function s(t,e){return t?o(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function f(t){return null===t}function l(t){return null==t}var h=t("punycode");r.parse=o,r.resolve=a,r.resolveObject=s,r.format=i,r.Url=n;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","	"],v=["{","}","|","\\","^","`"].concat(g),y=["'"].concat(v),m=["%","/","?",";","#"].concat(y),w=["/","?","#"],I=255,E=/^[a-z0-9A-Z_-]{0,63}$/,b=/^([a-z0-9A-Z_-]{0,63})(.*)$/,S={javascript:!0,"javascript:":!0},A={javascript:!0,"javascript:":!0},N={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},L=t("querystring");n.prototype.parse=function(t,e,r){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var o=p.exec(n);if(o){o=o[0];var i=o.toLowerCase();this.protocol=i,n=n.substr(o.length)}if(r||o||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||o&&A[o]||(n=n.substr(2),this.slashes=!0)}if(!A[o]&&(a||o&&!N[o])){for(var s=-1,c=0;c<w.length;c++){var f=n.indexOf(w[c]);-1!==f&&(-1===s||s>f)&&(s=f)}var l,d;d=-1===s?n.lastIndexOf("@"):n.lastIndexOf("@",s),-1!==d&&(l=n.slice(0,d),n=n.slice(d+1),this.auth=decodeURIComponent(l)),s=-1;for(var c=0;c<m.length;c++){var f=n.indexOf(m[c]);-1!==f&&(-1===s||s>f)&&(s=f)}-1===s&&(s=n.length),this.host=n.slice(0,s),n=n.slice(s),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),c=0,x=v.length;x>c;c++){var O=v[c];if(O&&!O.match(E)){for(var M="",T=0,j=O.length;j>T;T++)M+=O.charCodeAt(T)>127?"x":O[T];if(!M.match(E)){var C=v.slice(0,c),R=v.slice(c+1),_=O.match(b);_&&(C.push(_[1]),R.unshift(_[2])),R.length&&(n="/"+R.join(".")+n),this.hostname=C.join(".");break}}}if(this.hostname.length>I?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var F=this.hostname.split("."),P=[],c=0;c<F.length;++c){var D=F[c];P.push(D.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(D):D)}this.hostname=P.join(".")}var G=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+G,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!S[i])for(var c=0,x=y.length;x>c;c++){var B=y[c],U=encodeURIComponent(B);U===B&&(U=escape(B)),n=n.split(B).join(U)}var V=n.indexOf("#");-1!==V&&(this.hash=n.substr(V),n=n.slice(0,V));var H=n.indexOf("?");if(-1!==H?(this.search=n.substr(H),this.query=n.substr(H+1),e&&(this.query=L.parse(this.query)),n=n.slice(0,H)):e&&(this.search="",this.query={}),n&&(this.pathname=n),N[i]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var G=this.pathname||"",D=this.search||"";this.path=G+D}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(i=L.stringify(this.query));var a=this.search||i&&"?"+i||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||N[e])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+o+r+a+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(u(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),N[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!N[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||A[t.protocol])r.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),r.pathname=o.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var i=r.pathname||"",a=r.search||"";r.path=i+a}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),h=c||s||r.host&&t.pathname,p=h,d=r.pathname&&r.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],g=r.protocol&&!N[r.protocol];if(g&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),h=h&&(""===o[0]||""===d[0])),c)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),r.search=t.search,r.query=t.query;else if(!l(t.search)){if(g){r.hostname=r.host=d.shift();var v=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;v&&(r.auth=v.shift(),r.host=r.hostname=v.shift())}return r.search=t.search,r.query=t.query,f(r.pathname)&&f(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var y=d.slice(-1)[0],m=(r.host||t.host)&&("."===y||".."===y)||""===y,w=0,I=d.length;I>=0;I--)y=d[I],"."==y?d.splice(I,1):".."===y?(d.splice(I,1),w++):w&&(d.splice(I,1),w--);if(!h&&!p)for(;w--;w)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),m&&"/"!==d.join("/").substr(-1)&&d.push("");var E=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(g){r.hostname=r.host=E?"":d.length?d.shift():"";var v=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;v&&(r.auth=v.shift(),r.host=r.hostname=v.shift())}return h=h||r.host&&d.length,h&&!E&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),f(r.pathname)&&f(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=d.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:12,querystring:15}],25:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],26:[function(t,e,r){(function(e,n){function o(t,e){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(e)?n.showHidden=e:e&&r._extend(n,e),E(n.showHidden)&&(n.showHidden=!1),E(n.depth)&&(n.depth=2),E(n.colors)&&(n.colors=!1),E(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),u(n,t,n.depth)}function i(t,e){var r=o.styles[e];return r?"["+o.colors[r][0]+"m"+t+"["+o.colors[r][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&L(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var o=e.inspect(n,t);return w(o)||(o=u(t,o,n)),o}var i=c(t,e);if(i)return i;var a=Object.keys(e),g=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),N(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(e);if(0===a.length){if(L(e)){var v=e.name?": "+e.name:"";return t.stylize("[Function"+v+"]","special")}if(b(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(A(e))return t.stylize(Date.prototype.toString.call(e),"date");if(N(e))return f(e)}var y="",m=!1,I=["{","}"];if(d(e)&&(m=!0,I=["[","]"]),L(e)){var E=e.name?": "+e.name:"";y=" [Function"+E+"]"}if(b(e)&&(y=" "+RegExp.prototype.toString.call(e)),A(e)&&(y=" "+Date.prototype.toUTCString.call(e)),N(e)&&(y=" "+f(e)),0===a.length&&(!m||0==e.length))return I[0]+y+I[1];if(0>n)return b(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var S;return S=m?l(t,e,n,g,a):a.map(function(r){return h(t,e,n,g,r,m)}),t.seen.pop(),p(S,y,I)}function c(t,e){if(E(e))return t.stylize("undefined","undefined");if(w(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return m(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,e,r,n,o){for(var i=[],a=0,s=e.length;s>a;++a)j(e,String(a))?i.push(h(t,e,r,n,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(t,e,r,n,o,!0))}),i}function h(t,e,r,n,o,i){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),j(n,o)||(a="["+o+"]"),s||(t.seen.indexOf(c.value)<0?(s=v(r)?u(t,c.value,null):u(t,c.value,r-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),E(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,r){var n=0,o=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return null==t}function m(t){return"number"==typeof t}function w(t){return"string"==typeof t}function I(t){return"symbol"==typeof t}function E(t){return void 0===t}function b(t){return S(t)&&"[object RegExp]"===O(t)}function S(t){return"object"==typeof t&&null!==t}function A(t){return S(t)&&"[object Date]"===O(t);
}function N(t){return S(t)&&("[object Error]"===O(t)||t instanceof Error)}function L(t){return"function"==typeof t}function x(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function O(t){return Object.prototype.toString.call(t)}function M(t){return 10>t?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,e=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":");return[t.getDate(),F[t.getMonth()],e].join(" ")}function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=/%[sdj%]/g;r.format=function(t){if(!w(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(o(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,i=n.length,a=String(t).replace(C,function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),s=n[r];i>r;s=n[++r])a+=v(s)||!S(s)?" "+s:" "+o(s);return a},r.deprecate=function(t,o){function i(){if(!a){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),a=!0}return t.apply(this,arguments)}if(E(n.process))return function(){return r.deprecate(t,o).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return i};var R,_={};r.debuglog=function(t){if(E(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!_[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var n=e.pid;_[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else _[t]=function(){};return _[t]},r.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=g,r.isNull=v,r.isNullOrUndefined=y,r.isNumber=m,r.isString=w,r.isSymbol=I,r.isUndefined=E,r.isRegExp=b,r.isObject=S,r.isDate=A,r.isError=N,r.isFunction=L,r.isPrimitive=x,r.isBuffer=t("./support/isBuffer");var F=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",T(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!S(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("ngpmcQ"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":25,inherits:10,ngpmcQ:11}],27:[function(t,e,r){function n(t,e,r){for(var n=-1,o=a(e),i=o.length;++n<i;){var s=o[n],u=t[s],c=r(u,e[s],s,t,e);(c===c?c===u:u!==u)&&(void 0!==u||s in t)||(t[s]=c)}return t}var o=t("lodash._baseassign"),i=t("lodash._createassigner"),a=t("lodash.keys"),s=i(function(t,e,r){return r?n(t,e,r):o(t,e)});e.exports=s},{"lodash._baseassign":28,"lodash._createassigner":30,"lodash.keys":34}],28:[function(t,e,r){function n(t,e){return null==e?t:o(e,i(e),t)}var o=t("lodash._basecopy"),i=t("lodash.keys");e.exports=n},{"lodash._basecopy":29,"lodash.keys":34}],29:[function(t,e,r){function n(t,e,r){r||(r={});for(var n=-1,o=e.length;++n<o;){var i=e[n];r[i]=t[i]}return r}e.exports=n},{}],30:[function(t,e,r){function n(t){return a(function(e,r){var n=-1,a=null==e?0:r.length,s=a>2?r[a-2]:void 0,u=a>2?r[2]:void 0,c=a>1?r[a-1]:void 0;for("function"==typeof s?(s=o(s,c,5),a-=2):(s="function"==typeof c?c:void 0,a-=s?1:0),u&&i(r[0],r[1],u)&&(s=3>a?void 0:s,a=1);++n<a;){var f=r[n];f&&t(e,f,s)}return e})}var o=t("lodash._bindcallback"),i=t("lodash._isiterateecall"),a=t("lodash.restparam");e.exports=n},{"lodash._bindcallback":31,"lodash._isiterateecall":32,"lodash.restparam":33}],31:[function(t,e,r){function n(t,e,r){if("function"!=typeof t)return o;if(void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,o){return t.call(e,r,n,o)};case 4:return function(r,n,o,i){return t.call(e,r,n,o,i)};case 5:return function(r,n,o,i,a){return t.call(e,r,n,o,i,a)}}return function(){return t.apply(e,arguments)}}function o(t){return t}e.exports=n},{}],32:[function(t,e,r){function n(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&s(l(t))}function i(t,e){return t="number"==typeof t||c.test(t)?+t:-1,e=null==e?f:e,t>-1&&t%1==0&&e>t}function a(t,e,r){if(!u(r))return!1;var n=typeof e;if("number"==n?o(r)&&i(e,r.length):"string"==n&&e in r){var a=r[e];return t===t?t===a:a!==a}return!1}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var c=/^\d+$/,f=9007199254740991,l=n("length");e.exports=a},{}],33:[function(t,e,r){function n(t,e){if("function"!=typeof t)throw new TypeError(o);return e=i(void 0===e?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,o=i(r.length-e,0),a=Array(o);++n<o;)a[n]=r[e+n];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}var s=Array(e+1);for(n=-1;++n<e;)s[n]=r[n];return s[e]=a,t.apply(this,s)}}var o="Expected a function",i=Math.max;e.exports=n},{}],34:[function(t,e,r){function n(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&a(m(t))}function i(t,e){return t="number"==typeof t||p.test(t)?+t:-1,e=null==e?y:e,t>-1&&t%1==0&&e>t}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function s(t){for(var e=c(t),r=e.length,n=r&&t.length,o=!!n&&a(n)&&(h(t)||l(t)),s=-1,u=[];++s<r;){var f=e[s];(o&&i(f,n)||g.call(t,f))&&u.push(f)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(h(t)||l(t))&&e||0;for(var r=t.constructor,n=-1,o="function"==typeof r&&r.prototype===t,s=Array(e),c=e>0;++n<e;)s[n]=n+"";for(var f in t)c&&i(f,e)||"constructor"==f&&(o||!g.call(t,f))||s.push(f);return s}var f=t("lodash._getnative"),l=t("lodash.isarguments"),h=t("lodash.isarray"),p=/^\d+$/,d=Object.prototype,g=d.hasOwnProperty,v=f(Object,"keys"),y=9007199254740991,m=n("length"),w=v?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?s(t):u(t)?v(t):[]}:s;e.exports=w},{"lodash._getnative":35,"lodash.isarguments":36,"lodash.isarray":39}],35:[function(t,e,r){function n(t){return!!t&&"object"==typeof t}function o(t,e){var r=null==t?void 0:t[e];return s(r)?r:void 0}function i(t){return a(t)&&p.call(t)==u}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null==t?!1:i(t)?d.test(l.call(t)):n(t)&&c.test(t)}var u="[object Function]",c=/^\[object .+?Constructor\]$/,f=Object.prototype,l=Function.prototype.toString,h=f.hasOwnProperty,p=f.toString,d=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=o},{}],36:[function(t,e,r){function n(t){return!!t&&"object"==typeof t}function o(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&a(h(t))}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function s(t){return n(t)&&i(t)&&c.call(t,"callee")&&!f.call(t,"callee")}var u=Object.prototype,c=u.hasOwnProperty,f=u.propertyIsEnumerable,l=9007199254740991,h=o("length");e.exports=s},{}],37:[function(t,e,r){function n(t,e,r){return t===t&&(void 0!==r&&(t=r>=t?t:r),void 0!==e&&(t=t>=e?t:e)),t}function o(t){var e=i(t)?N.call(t):"";return e==v||e==y}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return!!t&&"object"==typeof t}function s(t){return"symbol"==typeof t||a(t)&&N.call(t)==m}function u(t){if(!t)return 0===t?t:0;if(t=c(t),t===p||t===-p){var e=0>t?-1:1;return e*d}var r=t%1;return t===t?r?t-r:t:0}function c(t){if(i(t)){var e=o(t.valueOf)?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(w,"");var r=E.test(t);return r||b.test(t)?S(t.slice(2),r?2:8):I.test(t)?g:+t}function f(t){if("string"==typeof t)return t;if(null==t)return"";if(s(t))return L?O.call(t):"";var e=t+"";return"0"==e&&1/t==-p?"-0":e}function l(t,e,r){t=f(t),e="string"==typeof e?e:e+"";var o=t.length;return r=void 0===r?o:n(u(r),0,o),r-=e.length,r>=0&&t.indexOf(e,r)==r}var h=t("lodash._root"),p=1/0,d=1.7976931348623157e308,g=NaN,v="[object Function]",y="[object GeneratorFunction]",m="[object Symbol]",w=/^\s+|\s+$/g,I=/^[-+]0x[0-9a-f]+$/i,E=/^0b[01]+$/i,b=/^0o[0-7]+$/i,S=parseInt,A=Object.prototype,N=A.toString,L=h.Symbol,x=L?L.prototype:void 0,O=L?x.toString:void 0;e.exports=l},{"lodash._root":38}],38:[function(t,e,r){(function(t){function n(t){return t&&t.Object===Object?t:null}var o={"function":!0,object:!0},i=o[typeof r]&&r&&!r.nodeType?r:null,a=o[typeof e]&&e&&!e.nodeType?e:null,s=n(i&&a&&"object"==typeof t&&t),u=n(o[typeof self]&&self),c=n(o[typeof window]&&window),f=n(o[typeof this]&&this),l=s||c!==(f&&f.window)&&c||u||f||Function("return this")();e.exports=l}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(t,e,r){function n(t){return!!t&&"object"==typeof t}function o(t,e){var r=null==t?void 0:t[e];return u(r)?r:void 0}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function a(t){return s(t)&&g.call(t)==f}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null==t?!1:a(t)?v.test(p.call(t)):n(t)&&l.test(t)}var c="[object Array]",f="[object Function]",l=/^\[object .+?Constructor\]$/,h=Object.prototype,p=Function.prototype.toString,d=h.hasOwnProperty,g=h.toString,v=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=o(Array,"isArray"),m=9007199254740991,w=y||function(t){return n(t)&&i(t.length)&&g.call(t)==c};e.exports=w},{}],40:[function(t,e,r){function n(t){return!!t&&"object"==typeof t}function o(t){return"string"==typeof t||n(t)&&s.call(t)==i}var i="[object String]",a=Object.prototype,s=a.toString;e.exports=o},{}],41:[function(t,e,r){function n(t){var e=t?t.length:0;return e?t[e-1]:void 0}e.exports=n},{}],42:[function(t,e,r){function n(t,e){var r=-1,n=i(t)?Array(t.length):[];return f(t,function(t,o,i){n[++r]=e(t,o,i)}),n}function o(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&a(p(t))}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&h>=t}function s(t,e,r){var o=l(t)?u:n;return e=c(e,r,3),o(t,e)}var u=t("lodash._arraymap"),c=t("lodash._basecallback"),f=t("lodash._baseeach"),l=t("lodash.isarray"),h=9007199254740991,p=o("length");e.exports=s},{"lodash._arraymap":43,"lodash._basecallback":44,"lodash._baseeach":49,"lodash.isarray":39}],43:[function(t,e,r){function n(t,e){for(var r=-1,n=t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}e.exports=n},{}],44:[function(t,e,r){function n(t){return null==t?"":t+""}function o(t,e,r){var n=typeof t;return"function"==n?void 0===e?t:b(t,e,r):null==t?w:"object"==n?s(t):void 0===e?I(t):u(t,e)}function i(t,e,r){if(null!=t){void 0!==r&&r in g(t)&&(e=[r]);for(var n=0,o=e.length;null!=t&&o>n;)t=t[e[n++]];return n&&n==o?t:void 0}}function a(t,e,r){var n=e.length,o=n,i=!r;if(null==t)return!o;for(t=g(t);n--;){var a=e[n];if(i&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<o;){a=e[n];var s=a[0],u=t[s],c=a[1];if(i&&a[2]){if(void 0===u&&!(s in t))return!1}else{var f=r?r(u,c,s):void 0;if(!(void 0===f?E(c,u,r,!0):f))return!1}}return!0}function s(t){var e=h(t);if(1==e.length&&e[0][2]){var r=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[r]===n&&(void 0!==n||r in g(t))}}return function(t){return a(t,e)}}function u(t,e){var r=S(t),n=p(t)&&d(e),o=t+"";return t=v(t),function(a){if(null==a)return!1;var s=o;if(a=g(a),(r||!n)&&!(s in a)){if(a=1==t.length?a:i(a,l(t,0,-1)),null==a)return!1;s=y(t),a=g(a)}return a[s]===e?void 0!==e||s in a:E(e,a[s],void 0,!0)}}function c(t){return function(e){return null==e?void 0:e[t]}}function f(t){var e=t+"";return t=v(t),function(r){return i(r,t,e)}}function l(t,e,r){var n=-1,o=t.length;e=null==e?0:+e||0,0>e&&(e=-e>o?0:o+e),r=void 0===r||r>o?o:+r||0,0>r&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}function h(t){for(var e=A(t),r=e.length;r--;)e[r][2]=d(e[r][1]);return e}function p(t,e){var r=typeof t;if("string"==r&&L.test(t)||"number"==r)return!0;if(S(t))return!1;var n=!N.test(t);return n||null!=e&&t in g(e)}function d(t){return t===t&&!m(t)}function g(t){return m(t)?t:Object(t)}function v(t){if(S(t))return t;var e=[];return n(t).replace(x,function(t,r,n,o){e.push(n?o.replace(O,"$1"):r||t)}),e}function y(t){var e=t?t.length:0;return e?t[e-1]:void 0}function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function w(t){return t}function I(t){return p(t)?c(t):f(t)}var E=t("lodash._baseisequal"),b=t("lodash._bindcallback"),S=t("lodash.isarray"),A=t("lodash.pairs"),N=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,L=/^\w*$/,x=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,O=/\\(\\)?/g;e.exports=o},{"lodash._baseisequal":45,"lodash._bindcallback":47,"lodash.isarray":39,"lodash.pairs":48}],45:[function(t,e,r){function n(t){return!!t&&"object"==typeof t}function o(t,e){for(var r=-1,n=t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function i(t,e,r,o,s,u){return t===e?!0:null==t||null==e||!f(t)&&!n(e)?t!==t&&e!==e:a(t,e,i,r,o,s,u)}function a(t,e,r,n,o,i,a){var f=l(t),p=l(e),v=g,y=g;f||(v=N.call(t),v==d?v=I:v!=I&&(f=h(t))),p||(y=N.call(e),y==d?y=I:y!=I&&(p=h(e)));var m=v==I,w=y==I,E=v==y;if(E&&!f&&!m)return u(t,e,v);if(!o){var b=m&&A.call(t,"__wrapped__"),S=w&&A.call(e,"__wrapped__");if(b||S)return r(b?t.value():t,S?e.value():e,n,o,i,a)}if(!E)return!1;i||(i=[]),a||(a=[]);for(var L=i.length;L--;)if(i[L]==t)return a[L]==e;i.push(t),a.push(e);var x=(f?s:c)(t,e,r,n,o,i,a);return i.pop(),a.pop(),x}function s(t,e,r,n,i,a,s){var u=-1,c=t.length,f=e.length;if(c!=f&&!(i&&f>c))return!1;for(;++u<c;){var l=t[u],h=e[u],p=n?n(i?h:l,i?l:h,u):void 0;if(void 0!==p){if(p)continue;return!1}if(i){if(!o(e,function(t){return l===t||r(l,t,n,i,a,s)}))return!1}else if(l!==h&&!r(l,h,n,i,a,s))return!1}return!0}function u(t,e,r){switch(r){case v:case y:return+t==+e;case m:return t.name==e.name&&t.message==e.message;case w:return t!=+t?e!=+e:t==+e;case E:case b:return t==e+""}return!1}function c(t,e,r,n,o,i,a){var s=p(t),u=s.length,c=p(e),f=c.length;if(u!=f&&!o)return!1;for(var l=u;l--;){var h=s[l];if(!(o?h in e:A.call(e,h)))return!1}for(var d=o;++l<u;){h=s[l];var g=t[h],v=e[h],y=n?n(o?v:g,o?g:v,h):void 0;if(!(void 0===y?r(g,v,n,o,i,a):y))return!1;d||(d="constructor"==h)}if(!d){var m=t.constructor,w=e.constructor;if(m!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof w&&w instanceof w))return!1}return!0}function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=t("lodash.isarray"),h=t("lodash.istypedarray"),p=t("lodash.keys"),d="[object Arguments]",g="[object Array]",v="[object Boolean]",y="[object Date]",m="[object Error]",w="[object Number]",I="[object Object]",E="[object RegExp]",b="[object String]",S=Object.prototype,A=S.hasOwnProperty,N=S.toString;e.exports=i},{"lodash.isarray":39,"lodash.istypedarray":46,"lodash.keys":50}],46:[function(t,e,r){function n(t){return!!t&&"object"==typeof t}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&C>=t}function i(t){return n(t)&&o(t.length)&&!!M[j.call(t)]}var a="[object Arguments]",s="[object Array]",u="[object Boolean]",c="[object Date]",f="[object Error]",l="[object Function]",h="[object Map]",p="[object Number]",d="[object Object]",g="[object RegExp]",v="[object Set]",y="[object String]",m="[object WeakMap]",w="[object ArrayBuffer]",I="[object Float32Array]",E="[object Float64Array]",b="[object Int8Array]",S="[object Int16Array]",A="[object Int32Array]",N="[object Uint8Array]",L="[object Uint8ClampedArray]",x="[object Uint16Array]",O="[object Uint32Array]",M={};M[I]=M[E]=M[b]=M[S]=M[A]=M[N]=M[L]=M[x]=M[O]=!0,M[a]=M[s]=M[w]=M[u]=M[c]=M[f]=M[l]=M[h]=M[p]=M[d]=M[g]=M[v]=M[y]=M[m]=!1;var T=Object.prototype,j=T.toString,C=9007199254740991;e.exports=i},{}],47:[function(t,e,r){e.exports=t(31)},{}],48:[function(t,e,r){function n(t){return o(t)?t:Object(t)}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function i(t){t=n(t);for(var e=-1,r=a(t),o=r.length,i=Array(o);++e<o;){var s=r[e];i[e]=[s,t[s]]}return i}var a=t("lodash.keys");e.exports=i},{"lodash.keys":50}],49:[function(t,e,r){function n(t,e){return p(t,e,f)}function o(t){return function(e){return null==e?void 0:e[t]}}function i(t,e){return function(r,n){var o=r?d(r):0;if(!s(o))return t(r,n);for(var i=e?o:-1,a=u(r);(e?i--:++i<o)&&n(a[i],i,a)!==!1;);return r}}function a(t){return function(e,r,n){for(var o=u(e),i=n(e),a=i.length,s=t?a:-1;t?s--:++s<a;){var c=i[s];if(r(o[c],c,o)===!1)break}return e}}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function u(t){return c(t)?t:Object(t)}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var f=t("lodash.keys"),l=9007199254740991,h=i(n),p=a(),d=o("length");e.exports=h},{"lodash.keys":50}],50:[function(t,e,r){e.exports=t(34)},{"lodash._getnative":51,"lodash.isarguments":52,"lodash.isarray":39}],51:[function(t,e,r){e.exports=t(35)},{}],52:[function(t,e,r){e.exports=t(36)},{}]},{},[1])(1)});